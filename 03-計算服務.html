<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AWS SAP 學習指南 - 計算服務</title>
    <link rel=stylesheet type="text/css" href="common.css">
</head>
<body>
    <div class="nav">
        <a href="02-安全與身份.html">上一章：安全與身份</a>
        <a href="04-存儲服務.html">下一章：存儲服務</a>
    </div>

    <h1>計算服務</h1>
    
    <div class="important">
        <p>計算服務是 AWS 的核心服務之一，SAP 考試中涉及 EC2、Auto Scaling、ELB、容器服務等關鍵知識點，以及如何設計高可用、可擴展的計算架構。</p>
    </div>
    
    <h2>EC2 (彈性計算雲)</h2>
    
    <h3>實例類型和系列</h3>
    <ul>
        <li>通用型 (T, M)
            <ul>
                <li>平衡計算、內存和網絡資源</li>
                <li>T 系列：可突增性能，適合流量波動的工作負載
                    <ul>
                        <li>基於CPU積分機制運作，閒置時積累積分，繁忙時消耗積分</li>
                        <li>例如：T3.micro提供2個vCPU和1GB內存，適合低到中等流量的網站、開發環境和小型應用</li>
                        <li>有標準模式（積分用完後限制性能）和無限模式（積分用完後可付費獲得額外性能）</li>
                    </ul>
                </li>
                <li>M 系列：平衡的計算和內存，適合中型數據庫和內存處理
                    <ul>
                        <li>提供穩定、可預測的性能，沒有突增限制</li>
                        <li>例如：M5.xlarge提供4個vCPU和16GB內存，適合中型數據庫、後端服務器和生產環境</li>
                        <li>適用於需要穩定性能的應用，如企業應用、CRM系統和內容管理系統</li>
                    </ul>
                </li>
            </ul>
        </li>
        <li>計算優化型 (C)
            <ul>
                <li>高性能處理器，高計算密度</li>
                <li>適合批處理、科學建模、高性能 Web 服務器
                    <ul>
                        <li>CPU與內存比例較高，專為計算密集型工作負載設計</li>
                        <li>例如：C5.2xlarge提供8個vCPU和16GB內存，CPU:內存比為1:2</li>
                        <li>適用場景：高流量Web服務器、遊戲服務器、廣告服務、高性能計算(HPC)、視頻編碼、分佈式分析</li>
                        <li>特點：支持增強型網絡功能，提供更高的網絡吞吐量和更低的延遲</li>
                    </ul>
                </li>
            </ul>
        </li>
        <li>內存優化型 (R, X, z)
            <ul>
                <li>R 系列：適合內存密集型應用
                    <ul>
                        <li>內存與CPU比例較高，通常為8:1或更高</li>
                        <li>例如：R5.xlarge提供4個vCPU和32GB內存</li>
                        <li>適用場景：內存數據庫(Redis, Memcached)、實時大數據分析、內存中緩存、中大型SAP系統</li>
                    </ul>
                </li>
                <li>X 系列：極高內存，適合大型數據庫
                    <ul>
                        <li>提供最高的內存與CPU比例，可達到32:1</li>
                        <li>例如：X1.32xlarge提供128個vCPU和3,904GB內存</li>
                        <li>適用場景：SAP HANA、Apache Spark、大型企業級數據庫、內存數據庫集群</li>
                        <li>特點：支持持久性內存(PMEM)選項，提供更高的性價比</li>
                    </ul>
                </li>
                <li>z 系列：高頻內存，適合電子設計自動化
                    <ul>
                        <li>專為需要高頻率、高內存訪問的工作負載設計</li>
                        <li>例如：z1d.3xlarge提供12個vCPU(4.0 GHz)和96GB內存</li>
                        <li>適用場景：電子設計自動化(EDA)、關係數據庫、實時數據處理</li>
                        <li>特點：單核心頻率高達4.0 GHz，適合對延遲敏感的應用</li>
                    </ul>
                </li>
            </ul>
        </li>
        <li>存儲優化型 (D, H, I)
            <ul>
                <li>高磁盤吞吐量，大量本地存儲</li>
                <li>適合數據倉庫、分佈式文件系統
                    <ul>
                        <li>D系列(Dense Storage)：提供高HDD存儲密度和中等CPU性能
                            <ul>
                                <li>例如：D2.8xlarge提供36個vCPU、244GB內存和24個2TB HDD(總計48TB)</li>
                                <li>適用場景：Hadoop分佈式處理、數據倉庫、日誌處理、冷數據存儲</li>
                            </ul>
                        </li>
                        <li>H系列(High Disk Throughput)：提供高磁盤吞吐量和平衡的CPU性能
                            <ul>
                                <li>例如：H1.16xlarge提供64個vCPU、256GB內存和8個2TB HDD</li>
                                <li>適用場景：MapReduce工作負載、分佈式文件系統、數據處理應用</li>
                            </ul>
                        </li>
                        <li>I系列(I/O Optimized)：提供高IOPS和低延遲SSD存儲
                            <ul>
                                <li>例如：I3.metal提供裸機性能、512GB內存和8個1.9TB NVMe SSD</li>
                                <li>適用場景：高性能數據庫、ElasticSearch、時序數據庫、高頻交易系統</li>
                            </ul>
                        </li>
                    </ul>
                </li>
            </ul>
        </li>
        <li>加速計算型 (P, G, F)
            <ul>
                <li>GPU/FPGA 加速</li>
                <li>適合機器學習、圖形處理、視頻編碼
                    <ul>
                        <li>P系列(GPU計算加速)：配備NVIDIA Tesla GPU，專為高性能計算和機器學習設計
                            <ul>
                                <li>例如：P3.16xlarge提供8個NVIDIA V100 GPU，64個vCPU和488GB內存</li>
                                <li>適用場景：深度學習訓練、高性能計算、科學模擬、計算金融</li>
                                <li>特點：支持NVIDIA CUDA和GPU直通，提供最高的GPU計算性能</li>
                            </ul>
                        </li>
                        <li>G系列(圖形加速)：配備NVIDIA GPU，專為圖形密集型應用設計
                            <ul>
                                <li>例如：G4dn.xlarge提供1個NVIDIA T4 GPU，4個vCPU和16GB內存</li>
                                <li>適用場景：視頻編碼/解碼、遊戲流媒體、圖形工作站、小型機器學習推理</li>
                            </ul>
                        </li>
                        <li>F系列(FPGA加速)：配備現場可編程門陣列(FPGA)，可自定義硬件加速
                            <ul>
                                <li>例如：F1.2xlarge提供1個Xilinx UltraScale+ VU9P FPGA，8個vCPU和122GB內存</li>
                                <li>適用場景：基因組學研究、金融分析、實時視頻處理、大數據搜索/分析</li>
                                <li>特點：允許用戶部署自定義硬件加速器，實現特定算法的高性能處理</li>
                            </ul>
                        </li>
                    </ul>
                </li>
            </ul>
        </li>
    </ul>
    
    <div class="note">
        <p>考試要點：了解不同實例類型的特點和適用場景，能夠為特定工作負載選擇最合適的實例類型。</p>
    </div>
    
    <h3>購買選項</h3>
    <ul>
        <li>按需實例
            <ul>
                <li>按小時付費，無長期承諾</li>
                <li>最靈活，但成本最高</li>
                <li>適合短期、不可預測或波動的工作負載
                    <ul>
                        <li>計費方式：按秒計費，最低60秒，之後按秒收費</li>
                        <li>優勢：無需前期投資，可隨時啟動和終止，無需長期規劃</li>
                        <li>適用場景：開發/測試環境、短期項目、流量峰值處理、初始部署階段</li>
                        <li>實例例子：一家電子商務網站在促銷活動期間使用按需實例來處理流量峰值，活動結束後終止這些實例</li>
                    </ul>
                </li>
            </ul>
        </li>
        <li>預留實例
            <ul>
                <li>預付費用換取折扣，1-3 年期限</li>
                <li>標準 RI：最高折扣，但靈活性最低
                    <ul>
                        <li>折扣幅度：相比按需實例最高可節省75%</li>
                        <li>付款選項：全額預付(最高折扣)、部分預付、無預付(折扣較低)</li>
                        <li>限制：不能更改實例類型、操作系統或租賃</li>
                        <li>適用場景：長期運行的生產環境，如核心數據庫服務器、ERP系統</li>
                    </ul>
                </li>
                <li>可轉換 RI：允許更改實例類型，但折扣較低
                    <ul>
                        <li>折扣幅度：相比按需實例最高可節省54%</li>
                        <li>靈活性：可以更改實例系列、操作系統、租賃和付款選項</li>
                        <li>轉換條件：新配置的價值必須等於或高於原配置</li>
                        <li>適用場景：需要靈活性但仍希望獲得折扣的工作負載，如可能需要縱向擴展的應用</li>
                    </ul>
                </li>
                <li>計劃 RI：在指定時間段內預留容量
                    <ul>
                        <li>特點：可以預定每天、每週或每月特定時間的計算容量</li>
                        <li>時間靈活性：可以選擇開始時間、持續時間和重複頻率</li>
                        <li>適用場景：有可預測使用模式的工作負載，如批處理作業、定期報告生成</li>
                        <li>實例例子：金融機構在每個工作日結束時運行批處理作業，使用計劃RI確保在這些時間有足夠容量</li>
                    </ul>
                </li>
                <li>適合穩定、可預測的工作負載
                    <ul>
                        <li>成本優化策略：將基礎負載(穩定部分)使用RI覆蓋，將變動部分使用按需或競價型實例</li>
                        <li>RI覆蓋率：企業通常將70-80%的工作負載使用RI覆蓋以實現最佳成本效益</li>
                        <li>RI共享：在組織內的多個賬戶間共享RI折扣(通過AWS Organizations)</li>
                    </ul>
                </li>
            </ul>
        </li>
        <li>Savings Plans
            <ul>
                <li>承諾使用量換取折扣</li>
                <li>計算 Savings Plans：適用於 EC2、Fargate 和 Lambda
                    <ul>
                        <li>特點：承諾在1年或3年內每小時支付特定金額</li>
                        <li>靈活性：自動應用於任何區域、實例系列、實例大小、操作系統或租賃</li>
                        <li>折扣幅度：最高可節省66%</li>
                        <li>適用場景：使用多種計算服務的組織，希望在不同服務間靈活分配使用量</li>
                    </ul>
                </li>
                <li>EC2 Instance Savings Plans：僅適用於 EC2
                    <ul>
                        <li>特點：承諾使用特定實例系列在特定區域</li>
                        <li>靈活性：可以更改實例大小和操作系統</li>
                        <li>折扣幅度：最高可節省72%，接近標準RI</li>
                        <li>適用場景：確定使用EC2但需要在實例大小上保持靈活性的工作負載</li>
                    </ul>
                </li>
                <li>比 RI 更靈活
                    <ul>
                        <li>主要優勢：無需指定具體實例類型，自動應用於最高性價比的使用量</li>
                        <li>使用分析：AWS Cost Explorer提供Savings Plans推薦和使用情況分析</li>
                        <li>與RI的區別：基於美元/小時的承諾而非特定實例類型</li>
                        <li>實例例子：一家SaaS公司使用Compute Savings Plans覆蓋其EC2、Lambda和Fargate使用量，隨著業務增長可靈活調整各服務的比例</li>
                    </ul>
                </li>
            </ul>
        </li>
        <li>競價型實例
            <ul>
                <li>利用備用容量，價格大幅降低但可能被中斷</li>
                <li>適合容錯、無狀態、靈活的工作負載
                    <ul>
                        <li>價格特點：相比按需實例最高可節省90%，價格根據供需動態變化</li>
                        <li>中斷機制：當EC2需要收回容量時，會提前2分鐘通知實例將被終止</li>
                        <li>適用工作負載：批處理作業、數據分析、渲染農場、CI/CD管道、開發/測試環境</li>
                        <li>不適用工作負載：關鍵生產應用、數據庫、需要持久狀態的應用</li>
                    </ul>
                </li>
                <li>可以設置最高價格
                    <ul>
                        <li>出價策略：可以設置願意支付的最高價格，或使用按需價格作為上限</li>
                        <li>持久請求：可以配置請求在實例終止後自動重新啟動</li>
                        <li>中斷處理：應用應設計為優雅處理中斷，如保存狀態、使用檢查點</li>
                    </ul>
                </li>
                <li>可以使用 Spot Fleet 管理多個實例類型
                    <ul>
                        <li>功能：自動請求和管理多種實例類型的競價型實例集合</li>
                        <li>分配策略：可選擇最低價格、容量優化或多樣化分配</li>
                        <li>容量維護：可以設置目標容量並自動替換被終止的實例</li>
                        <li>實例例子：基因組分析公司使用Spot Fleet運行大規模並行計算，指定多種實例類型以提高可用性並降低成本</li>
                    </ul>
                </li>
            </ul>
        </li>
        <li>專用實例
            <ul>
                <li>在專用硬件上運行，與其他客戶隔離</li>
                <li>可能需要滿足合規或許可要求
                    <ul>
                        <li>隔離級別：實例運行在專用於單個客戶的物理硬件上，但主機可能在不同租戶間共享</li>
                        <li>合規優勢：滿足需要物理隔離的監管要求，如HIPAA、PCI DSS</li>
                        <li>許可優勢：支持帶有特定許可條款的軟件，如Oracle Database、SQL Server Enterprise</li>
                        <li>適用場景：金融服務、醫療保健、需要嚴格隔離的工作負載</li>
                    </ul>
                </li>
                <li>可以與 RI 結合使用
                    <ul>
                        <li>成本優化：可以購買專用RI以獲得長期折扣</li>
                        <li>定價模式：專用實例比標準實例貴約10%</li>
                        <li>部署選項：可以在VPC中指定專用租賃</li>
                        <li>實例例子：一家醫療保健公司使用專用實例運行包含受保護健康信息(PHI)的應用，以滿足HIPAA合規要求</li>
                    </ul>
                </li>
            </ul>
        </li>
        <li>專用主機
            <ul>
                <li>完全專用的物理服務器</li>
                <li>可見底層物理核心
                    <ul>
                        <li>隔離級別：提供整個物理服務器的專用訪問，包括底層硬件</li>
                        <li>可見性：可以查看物理套接字、核心數量和主機ID</li>
                        <li>許可優勢：支持基於套接字或核心的軟件許可，如Windows Server、SQL Server、Oracle Database</li>
                        <li>適用場景：需要自帶許可(BYOL)的企業軟件，需要訪問物理資源特性的應用</li>
                    </ul>
                </li>
                <li>適合帶有核心許可的軟件
                    <ul>
                        <li>許可模型：支持按核心/套接字計費的軟件許可模型</li>
                        <li>成本節省：可以使用現有的軟件許可，避免雲端許可費用</li>
                        <li>合規性：滿足需要專用物理硬件的合規要求</li>
                    </ul>
                </li>
                <li>支持主機親和性
                    <ul>
                        <li>功能：可以將實例與特定專用主機關聯</li>
                        <li>優勢：在停止/啟動後保持實例在同一物理服務器上</li>
                        <li>用例：需要固定MAC地址的應用，需要保持硬件一致性的許可</li>
                        <li>實例例子：一家企業使用專用主機運行Oracle Database Enterprise Edition，利用主機親和性確保實例在重啟後保持在同一物理服務器上，以符合Oracle許可要求</li>
                    </ul>
                </li>
            </ul>
        </li>
    </ul>
    
    <div class="important">
        <p>成本優化：為不同類型的工作負載選擇合適的購買選項可以顯著降低成本。例如，對於穩定的基礎負載使用 RI 或 Savings Plans，對於可中斷的工作負載使用競價型實例，對於峰值負載使用按需實例。</p>
    </div>
    
    <h3>實例存儲選項</h3>
    <ul>
        <li>實例存儲
            <ul>
                <li>臨時塊級存儲，實例終止時數據丟失</li>
                <li>物理連接到主機
                    <ul>
                        <li>物理特性：直接連接到EC2實例所在的物理服務器</li>
                        <li>性能特點：提供極低延遲和高IOPS，因為沒有網絡開銷</li>
                        <li>容量範圍：根據實例類型不同，從數GB到數TB不等</li>
                        <li>存儲類型：根據實例類型可能是HDD或NVMe SSD</li>
                    </ul>
                </li>
                <li>高 I/O 性能
                    <ul>
                        <li>性能數據：NVMe SSD實例存儲可提供高達數百萬IOPS和數GB/s吞吐量</li>
                        <li>延遲特性：微秒級延遲，適合對延遲敏感的應用</li>
                        <li>優化技術：支持TRIM命令，優化SSD性能</li>
                        <li>性能示例：i3.16xlarge提供8個1.9TB NVMe SSD卷，總吞吐量可達16GB/s</li>
                    </ul>
                </li>
                <li>適合臨時數據、緩存、臨時文件
                    <ul>
                        <li>最佳用例：數據庫緩存層(如Redis)、臨時數據處理、Kafka/RabbitMQ消息隊列</li>
                        <li>數據持久性策略：實現數據複製或定期備份到持久存儲</li>
                        <li>風險管理：設計應用以處理實例故障和數據丟失</li>
                        <li>實例例子：大數據處理任務使用實例存儲作為Spark或Hadoop的臨時處理空間，處理完成後將結果保存到S3</li>
                    </ul>
                </li>
            </ul>
        </li>
        <li>EBS (彈性塊存儲)
            <ul>
                <li>持久塊級存儲，獨立於實例生命週期
                    <ul>
                        <li>持久性特點：數據在實例終止後仍然保留</li>
                        <li>可用性設計：在單一可用區內自動複製，提供99.8%-99.9%的可用性</li>
                        <li>容量範圍：每個卷1GB-16TB，可以附加多個卷</li>
                        <li>生命週期管理：可以獨立於EC2實例創建、修改和刪除</li>
                    </ul>
                </li>
                <li>可以在實例之間移動
                    <ul>
                        <li>分離/附加功能：可以從一個實例分離並附加到另一個實例</li>
                        <li>使用場景：實例升級、故障恢復、數據共享</li>
                        <li>限制：只能在同一可用區內移動，除非使用快照</li>
                        <li>操作步驟：先分離卷，然後附加到新實例，可能需要重新掛載文件系統</li>
                    </ul>
                </li>
                <li>支持快照和加密
                    <ul>
                        <li>快照特性：增量備份，只保存上次快照後的變化</li>
                        <li>存儲位置：快照存儲在S3，但用戶無法直接訪問</li>
                        <li>加密選項：使用AWS KMS密鑰進行靜態加密</li>
                        <li>跨區域功能：快照可以複製到其他區域，實現災難恢復</li>
                    </ul>
                </li>
                <li>多種卷類型適合不同工作負載
                    <ul>
                        <li>通用型SSD (gp2/gp3)：平衡性能和成本，適合大多數工作負載
                            <ul>
                                <li>gp3：提供基準3,000 IOPS和125MB/s吞吐量，可獨立調整IOPS和吞吐量</li>
                                <li>gp2：性能與卷大小掛鉤，每GB提供3 IOPS，最低100 IOPS，最高16,000 IOPS</li>
                                <li>適用場景：開發環境、中小型數據庫、啟動卷</li>
                            </ul>
                        </li>
                        <li>預置IOPS SSD (io1/io2)：高性能、低延遲，適合I/O密集型應用
                            <ul>
                                <li>io2 Block Express：提供高達256,000 IOPS和4,000MB/s吞吐量</li>
                                <li>io1/io2：可以指定所需IOPS，最高64,000 IOPS</li>
                                <li>適用場景：關鍵業務數據庫、ERP系統、高性能應用</li>
                            </ul>
                        </li>
                        <li>吞吐量優化HDD (st1)：低成本高吞吐量，適合大數據工作負載
                            <ul>
                                <li>性能：最高500MB/s吞吐量，500 IOPS</li>
                                <li>適用場景：大數據、數據倉庫、日誌處理</li>
                                <li>限制：不能用作啟動卷</li>
                            </ul>
                        </li>
                        <li>冷HDD (sc1)：最低成本，適合不常訪問的數據
                            <ul>
                                <li>性能：最高250MB/s吞吐量，250 IOPS</li>
                                <li>適用場景：歸檔數據、冷數據存儲</li>
                                <li>成本效益：EBS中每GB成本最低的選項</li>
                            </ul>
                        </li>
                    </ul>
                </li>
            </ul>
        </li>
    </ul>
    
    <h3>實例元數據和用戶數據</h3>
    <ul>
        <li>實例元數據
            <ul>
                <li>關於實例的信息，可通過 http://169.254.169.254/latest/meta-data/ 訪問
                    <ul>
                        <li>訪問方式：只能從實例內部訪問，不需要額外認證</li>
                        <li>IMDSv2：提供更安全的基於令牌的訪問方法，防止SSRF攻擊</li>
                        <li>數據類別：包含實例、網絡和安全相關信息</li>
                        <li>更新頻率：某些數據會隨實例狀態變化而更新</li>
                    </ul>
                </li>
                <li>包括實例 ID、安全組、MAC 地址等
                    <ul>
                        <li>實例信息：ami-id, instance-id, instance-type, placement/availability-zone</li>
                        <li>網絡信息：mac, local-ipv4, public-ipv4, security-groups</li>
                        <li>IAM信息：iam/security-credentials/role-name（獲取臨時憑證）</li>
                        <li>其他：hostname, reservation-id, spot/termination-time（競價型實例）</li>
                    </ul>
                </li>
                <li>可用於自動化腳本和應用程序
                    <ul>
                        <li>自動化用例：動態配置應用程序，根據實例類型調整性能參數</li>
                        <li>服務發現：獲取IP地址和主機名進行服務註冊</li>
                        <li>安全實踐：獲取IAM角色臨時憑證，避免硬編碼憑證</li>
                        <li>代碼示例：使用curl或AWS CLI獲取元數據，如`curl http://169.254.169.254/latest/meta-data/instance-id`</li>
                    </ul>
                </li>
            </ul>
        </li>
        <li>用戶數據
            <ul>
                <li>啟動時執行的腳本，可通過 http://169.254.169.254/latest/user-data/ 訪問
                    <ul>
                        <li>數據大小：最大限制為16KB（未壓縮）</li>
                        <li>訪問方式：與元數據相同，但內容通常是腳本而非結構化數據</li>
                        <li>格式選項：可以是shell腳本、cloud-init指令或其他格式</li>
                        <li>安全考慮：用戶數據不加密，不應包含敏感信息</li>
                    </ul>
                </li>
                <li>用於自動化配置和安裝
                    <ul>
                        <li>常見任務：安裝軟件包、配置系統設置、啟動服務</li>
                        <li>cloud-init：Linux實例上的標準初始化工具，處理用戶數據</li>
                        <li>EC2Config/EC2Launch：Windows實例上處理用戶數據的服務</li>
                        <li>最佳實踐：使用用戶數據創建可重複部署的環境</li>
                    </ul>
                </li>
                <li>僅在實例首次啟動時執行
                    <ul>
                        <li>執行時機：實例首次啟動或從已停止狀態啟動時</li>
                        <li>重啟行為：實例重啟時不會執行用戶數據腳本</li>
                        <li>修改選項：可以配置在每次重啟時執行，但需要額外設置</li>
                        <li>實例例子：啟動Web服務器實例時，用戶數據腳本安裝Apache、配置虛擬主機並從S3部署網站內容</li>
                    </ul>
                </li>
            </ul>
        </li>
    </ul>
    
    <h3>置放群組</h3>
    <ul>
        <li>集群
            <ul>
                <li>將實例緊密打包在一起，位於同一可用區內
                    <ul>
                        <li>物理位置：實例位於同一機架甚至同一主機上</li>
                        <li>網絡特性：使用高帶寬、低延遲的10Gbps或25Gbps網絡</li>
                        <li>限制：單一可用區內，有實例類型限制</li>
                        <li>擴展考慮：建議一次啟動所有需要的實例，避免容量不足</li>
                    </ul>
                </li>
                <li>提供最低的網絡延遲和最高的網絡吞吐量
                    <ul>
                        <li>延遲特性：節點間延遲低至幾微秒</li>
                        <li>吞吐量：最高可達25Gbps（支持增強型網絡的實例）</li>
                        <li>網絡性能：支持高PPS（每秒數據包數）</li>
                        <li>技術細節：使用彈性網絡適配器(ENA)和彈性光纖適配器(EFA)</li>
                    </ul>
                </li>
                <li>適合需要節點間高性能通信的應用
                    <ul>
                        <li>計算特性：支持緊密耦合的並行處理</li>
                        <li>內存共享：適合共享內存應用</li>
                        <li>I/O密集型：適合需要高速數據交換的應用</li>
                        <li>實時處理：適合對延遲敏感的實時系統</li>
                    </ul>
                </li>
                <li>例如：HPC、大數據處理
                    <ul>
                        <li>HPC應用：計算流體動力學、分子動力學、天氣預報模型</li>
                        <li>大數據框架：Hadoop、Spark集群的主節點</li>
                        <li>數據庫集群：需要低延遲複製的數據庫集群</li>
                        <li>實例例子：金融服務公司使用集群置放群組運行高頻交易平台，利用極低的節點間延遲進行實時市場數據處理和交易執行</li>
                    </ul>
                </li>
            </ul>
        </li>
        <li>分布
            <ul>
                <li>將實例分布在不同的底層硬件上
                    <ul>
                        <li>物理隔離：確保實例運行在不同的物理硬件上</li>
                        <li>跨可用區：可以跨多個可用區部署</li>
                        <li>部署策略：每次啟動實例時，AWS選擇具有最少實例的硬件</li>
                        <li>硬件故障域：每個實例位於獨立的機架，有獨立的網絡和電源</li>
                    </ul>
                </li>
                <li>減少相關硬件故障的風險
                    <ul>
                        <li>故障隔離：單一硬件故障只影響一個實例</li>
                        <li>相關故障：防止電源、網絡、冷卻等共享資源故障</li>
                        <li>可用性提升：提高整體應用的可用性</li>
                        <li>災難恢復：作為多可用區部署的補充策略</li>
                    </ul>
                </li>
                <li>適合需要高可用性的關鍵應用
                    <ul>
                        <li>關鍵業務應用：需要最大化運行時間的核心系統</li>
                        <li>複製架構：主從數據庫、集群節點</li>
                        <li>無狀態應用：Web服務器、應用服務器</li>
                        <li>監控系統：確保監控節點不會同時失效</li>
                    </ul>
                </li>
                <li>每個可用區最多支持 7 個實例
                    <ul>
                        <li>擴展限制：需要更多實例時，使用多個分布置放群組</li>
                        <li>實例類型：支持大多數實例類型</li>
                        <li>部署建議：對於大型部署，結合使用多個置放群組和Auto Scaling</li>
                        <li>實例例子：金融服務公司將關鍵交易系統的7個節點部署在分布置放群組中，確保即使發生硬件故障，系統仍能保持運行</li>
                    </ul>
                </li>
            </ul>
        </li>
        <li>分區
            <ul>
                <li>將實例分布在不同的邏輯分區上，每個分區有獨立的機架
                    <ul>
                        <li>分區概念：每個置放群組最多有7個分區，每個分區有獨立的機架組</li>
                        <li>分區可見性：應用可以獲知實例所在的分區</li>
                        <li>分區策略：可以指定實例啟動到特定分區，或讓AWS自動分配</li>
                        <li>擴展能力：每個分區可以包含數百個實例，適合大規模部署</li>
                    </ul>
                </li>
                <li>減少相關硬件故障的影響
                    <ul>
                        <li>故障域隔離：分區之間相互隔離，一個分區的故障不影響其他分區</li>
                        <li>與分布的區別：分區允許每個分區有多個實例，而分布每個硬件只有一個實例</li>
                        <li>拓撲感知：應用可以根據分區信息優化數據放置和處理</li>
                        <li>容錯設計：可以實現類似HDFS的數據複製策略，確保數據跨分區複製</li>
                    </ul>
                </li>
                <li>適合分布式大數據應用
                    <ul>
                        <li>數據分片：支持基於分區的數據分片策略</li>
                        <li>拓撲感知：分布式應用可以感知底層硬件拓撲</li>
                        <li>大規模集群：支持大型節點集群，每個分區可以有多個節點</li>
                        <li>數據局部性：可以優化數據局部性，減少跨分區數據傳輸</li>
                    </ul>
                </li>
                <li>例如：HDFS、HBase、Cassandra
                    <ul>
                        <li>HDFS：可以將數據塊複製到不同分區，提高數據可用性</li>
                        <li>HBase：可以按分區部署區域服務器，優化數據訪問</li>
                        <li>Cassandra：可以將節點分布在不同分區，實現更好的故障隔離</li>
                        <li>實例例子：一家大數據分析公司使用分區置放群組部署10節點Cassandra集群，將節點均勻分布在5個分區中，每個分區2個節點，確保任何一個分區故障時數據仍然可用</li>
                    </ul>
                </li>
            </ul>
        </li>
    </ul>
    
    <div class="note">
        <p>考試要點：了解不同置放群組的特點和使用場景，特別是在需要低延遲或高可用性的架構中的應用。</p>
    </div>
    
    <h2>Auto Scaling</h2>
    
    <h3>Auto Scaling 組</h3>
    <ul>
        <li>定義最小、最大和期望的實例數量
            <ul>
                <li>最小容量：保證的實例數量
                    <ul>
                        <li>基礎容量：即使在低負載時也會保持運行的實例數</li>
                        <li>高可用性：確保應用始終有足夠實例處理請求</li>
                        <li>成本考慮：設置過高會增加基礎成本</li>
                        <li>建議策略：根據歷史最低負載設置，確保基本服務質量</li>
                    </ul>
                </li>
                <li>最大容量：可以擴展到的最大實例數量
                    <ul>
                        <li>容量上限：防止過度擴展和成本失控</li>
                        <li>資源限制：考慮賬戶限制、IP地址範圍等因素</li>
                        <li>性能考慮：設置過低可能無法處理流量峰值</li>
                        <li>建議策略：根據歷史峰值負載和預期增長設置，留有緩衝</li>
                    </ul>
                </li>
                <li>期望容量：當前應該運行的實例數量
                    <ul>
                        <li>動態調整：由Auto Scaling根據策略自動調整</li>
                        <li>手動調整：可以手動設置以覆蓋自動調整</li>
                        <li>初始值：創建組時設置的初始實例數</li>
                        <li>運行時行為：始終在最小和最大容量之間</li>
                    </ul>
                </li>
            </ul>
        </li>
        <li>跨多個可用區以提高可用性
            <ul>
                <li>在可用區之間平衡分配實例
                    <ul>
                        <li>分配策略：默認在所有啟用的可用區之間均勻分配實例</li>
                        <li>再平衡：當可用區不平衡時，Auto Scaling會自動調整</li>
                        <li>容量保護：可以啟用容量保護，防止在再平衡過程中終止實例</li>
                        <li>可用區選擇：可以選擇特定可用區或使用所有可用區</li>
                    </ul>
                </li>
                <li>提高容錯能力
                    <ul>
                        <li>故障隔離：單一可用區故障只影響部分實例</li>
                        <li>自動恢復：當一個可用區出現問題時，自動在健康的可用區啟動新實例</li>
                        <li>與ELB集成：結合ELB使用，自動將流量路由到健康的實例</li>
                        <li>實例例子：電子商務網站使用跨3個可用區的Auto Scaling組，當一個可用區發生網絡問題時，流量自動路由到其他兩個可用區的健康實例，同時在健康可用區啟動新實例以維持總容量</li>
                    </ul>
                </li>
            </ul>
        </li>
        <li>支持多種擴展策略
            <ul>
                <li>可以結合使用多種策略
                    <ul>
                        <li>策略組合：可以同時使用多種擴展策略</li>
                        <li>優先級處理：當多個策略同時觸發時，選擇產生最大容量的策略</li>
                        <li>冷卻時間：防止策略頻繁觸發導致的震盪</li>
                        <li>監控與調整：使用CloudWatch監控擴展活動，根據需要調整策略</li>
                    </ul>
                </li>
                <li>基於指標、計劃或預測進行擴展
                    <ul>
                        <li>指標來源：CloudWatch指標、自定義指標、SQS隊列深度</li>
                        <li>時間維度：即時響應(指標)、計劃性擴展、預測性擴展</li>
                        <li>複合指標：可以基於多個指標創建擴展策略</li>
                        <li>實例例子：新聞網站使用組合策略，基於CPU利用率進行目標跟踪擴展，同時使用計劃擴展在每天早上新聞高峰前增加容量，並使用預測擴展處理週末流量模式</li>
                    </ul>
                </li>
            </ul>
        </li>
    </ul>
    
    <h3>擴展策略</h3>
    <ul>
        <li>目標跟踪擴展
            <ul>
                <li>基於特定指標的目標值
                    <ul>
                        <li>工作原理：設定指標目標值，Auto Scaling自動調整容量以維持該值</li>
                        <li>支持指標：CPU利用率、平均網絡I/O、請求計數、自定義指標</li>
                        <li>指標選擇：應選擇與容量成比例的指標</li>
                        <li>目標設置：通常設置在60%-80%之間，留出處理突發流量的餘量</li>
                    </ul>
                </li>
                <li>自動調整容量以保持目標值
                    <ul>
                        <li>比例調整：根據當前值與目標值的比例計算需要的容量</li>
                        <li>平滑處理：使用數據點的平均值，避免短期波動導致頻繁擴展</li>
                        <li>擴展/縮減：擴展立即執行，縮減有冷卻期</li>
                        <li>指標不可用：當指標數據不可用時，不執行縮減操作</li>
                    </ul>
                </li>
                <li>例如：保持 CPU 利用率在 70%
                    <ul>
                        <li>實現方式：設置目標跟踪策略，指標為ASGAverageCPUUtilization，目標值為70%</li>
                        <li>擴展行為：當平均CPU超過70%時增加實例，低於70%時減少實例</li>
                        <li>適用場景：CPU密集型應用，如Web服務器、應用服務器</li>
                        <li>監控建議：監控擴展活動和CPU利用率，根據需要調整目標值</li>
                    </ul>
                </li>
                <li>最簡單的設置方式
                    <ul>
                        <li>配置簡單：只需設置目標指標和目標值</li>
                        <li>自我調節：自動計算擴展調整量，無需手動設置閾值和調整值</li>
                        <li>預定義指標：AWS提供常用預定義指標，簡化配置</li>
                        <li>實例例子：電子商務網站使用目標跟踪策略，設置ALBRequestCountPerTarget指標目標值為1000，確保每個實例處理的請求數保持在可控範圍內，自動擴展以處理流量變化</li>
                    </ul>
                </li>
            </ul>
        </li>
        <li>步進擴展
            <ul>
                <li>基於警報閾值的增量調整
                    <ul>
                        <li>工作原理：根據CloudWatch警報觸發不同級別的擴展操作</li>
                        <li>閾值設置：可以設置多個閾值，每個閾值對應不同的擴展操作</li>
                        <li>調整類型：可以是固定數量、百分比或設置為特定值</li>
                        <li>警報聚合：可以基於多個數據點的平均值、最大值或最小值</li>
                    </ul>
                </li>
                <li>可以設置不同的調整幅度
                    <ul>
                        <li>精細控制：根據偏離程度調整擴展幅度</li>
                        <li>擴展策略：可以設置更激進的擴展和更保守的縮減</li>
                        <li>冷卻期：每次擴展活動後的等待時間，防止過度擴展</li>
                        <li>預熱時間：新實例需要的準備時間，在此期間不計入指標</li>
                    </ul>
                </li>
                <li>例如：CPU > 70% 時添加 2 個實例，CPU > 85% 時添加 3 個實例
                    <ul>
                        <li>實現方式：創建兩個CloudWatch警報和對應的擴展策略</li>
                        <li>警報1：CPU > 70%時觸發添加2個實例的策略</li>
                        <li>警報2：CPU > 85%時觸發添加3個實例的策略</li>
                        <li>優先級：當多個警報同時觸發時，執行調整幅度最大的策略</li>
                    </ul>
                </li>
                <li>適用場景
                    <ul>
                        <li>需要精細控制擴展行為的應用</li>
                        <li>對不同級別的負載有不同響應策略的系統</li>
                        <li>需要快速響應突發流量的關鍵業務應用</li>
                        <li>實例例子：支付處理系統使用步進擴展，在交易量達到警告閾值時添加少量實例，在達到關鍵閾值時快速添加大量實例，確保系統在高峰期仍能保持響應</li>
                    </ul>
                </li>
            </ul>
        </li>
        <li>簡單擴展
            <ul>
                <li>基於單一指標的調整
                    <ul>
                        <li>工作原理：根據單一CloudWatch警報觸發擴展操作</li>
                        <li>簡單配置：只需設置一個指標、閾值和調整值</li>
                        <li>調整類型：可以是固定數量或百分比</li>
                        <li>與步進擴展的區別：每個警報只有一個閾值和一個操作</li>
                    </ul>
                </li>
                <li>在擴展活動後有冷卻期
                    <ul>
                        <li>冷卻期定義：擴展活動完成後，在此期間內忽略新的擴展請求</li>
                        <li>默認值：默認冷卻期為300秒(5分鐘)</li>
                        <li>目的：給新實例時間啟動並開始處理負載，防止過度擴展</li>
                        <li>分別設置：可以為擴展和縮減設置不同的冷卻期</li>
                    </ul>
                </li>
                <li>不如步進擴展靈活
                    <ul>
                        <li>限制：無法根據偏離程度調整擴展幅度</li>
                        <li>響應速度：由於冷卻期，可能無法快速響應負載變化</li>
                        <li>使用建議：對於大多數場景，推薦使用目標跟踪或步進擴展</li>
                        <li>實例例子：開發環境使用簡單擴展策略，當CPU超過80%時添加一個實例，低於40%時移除一個實例，設置較長的冷卻期以節省成本</li>
                    </ul>
                </li>
            </ul>
        </li>
        <li>預測擴展
            <ul>
                <li>基於歷史模式預測未來需求
                    <ul>
                        <li>工作原理：分析過去2週的負載模式，預測未來48小時的需求</li>
                        <li>機器學習：使用機器學習算法識別日常和週期性模式</li>
                        <li>指標選擇：支持CPU利用率、網絡流量和應用負載指標</li>
                        <li>預測更新：每6小時更新一次預測</li>
                    </ul>
                </li>
                <li>提前擴展以應對可預測的負載變化
                    <ul>
                        <li>預熱優勢：在負載增加前提前擴展，避免性能下降</li>
                        <li>模式：可以設置為預測模式(只預測不執行)或預測和擴展模式</li>
                        <li>與其他策略結合：通常與目標跟踪或步進擴展結合使用</li>
                        <li>最大容量：可以設置預測擴展的最大容量限制</li>
                    </ul>
                </li>
                <li>適合有規律負載模式的應用
                    <ul>
                        <li>適用場景：具有日常、週末或季節性流量模式的應用</li>
                        <li>效果評估：可以查看預測準確性指標，評估預測效果</li>
                        <li>優化建議：使用至少2週的數據以獲得準確預測</li>
                        <li>實例例子：零售網站使用預測擴展處理每天早上9點開始的購物高峰，以及週末和節假日的流量增加，確保在流量增加前系統已經擴展到足夠容量</li>
                    </ul>
                </li>
            </ul>
        </li>
        <li>計劃擴展
            <ul>
                <li>按預定時間表調整容量
                    <ul>
                        <li>工作原理：在指定時間點自動調整Auto Scaling組的容量</li>
                        <li>時間精度：支持分鐘級調度，可設置重複模式</li>
                        <li>調整類型：可以設置最小、最大和期望容量</li>
                        <li>時區支持：可以指定時區，支持夏令時自動調整</li>
                    </ul>
                </li>
                <li>適合可預測的負載變化
                    <ul>
                        <li>確定性：基於時間而非指標，提供確定性擴展</li>
                        <li>提前規劃：可以提前數月設置擴展計劃</li>
                        <li>與預測擴展對比：計劃擴展基於手動設置的時間表，而非自動學習</li>
                        <li>重複模式：支持一次性、每日、每週、每月或自定義cron表達式</li>
                    </ul>
                </li>
                <li>例如：工作日早上增加容量，晚上減少容量
                    <ul>
                        <li>實現方式：創建兩個計劃操作，一個在早上8點將容量設為10，一個在晚上8點將容量設為2</li>
                        <li>重複設置：設置為僅在工作日(週一至週五)重複</li>
                        <li>成本效益：在非高峰時段自動減少容量，節省成本</li>
                        <li>實例例子：企業內部應用系統在工作時間(週一至週五8:00-18:00)將容量設為最大，在非工作時間和週末自動縮減到最小容量，優化資源使用並降低成本</li>
                    </ul>
                </li>
            </ul>
        </li>
    </ul>
    
    <div class="important">
        <p>最佳實踐：結合使用多種擴展策略可以提供更好的性能和成本效益。例如，使用預測擴展處理可預測的負載模式，使用目標跟踪擴展處理意外的負載變化。</p>
    </div>
    
    <h3>啟動模板和配置</h3>
    <ul>
        <li>定義 Auto Scaling 組啟動的實例配置
            <ul>
                <li>包括 AMI、實例類型、安全組、用戶數據等
                    <ul>
                        <li>AMI選擇：指定用於啟動實例的Amazon機器映像</li>
                        <li>實例類型：可以指定單一類型或多種類型(混合實例策略)</li>
                        <li>安全組：定義實例的網絡訪問控制</li>
                        <li>用戶數據：提供啟動時執行的腳本，用於配置實例</li>
                        <li>其他設置：包括IAM角色、EBS卷、網絡接口、標籤等</li>
                    </ul>
                </li>
                <li>可以在多個 Auto Scaling 組中重用
                    <ul>
                        <li>重用優勢：確保配置一致性，減少重複工作</li>
                        <li>環境隔離：可以在開發、測試和生產環境使用相同模板</li>
                        <li>區域複製：可以在不同區域使用相同配置</li>
                        <li>實例例子：企業使用相同的啟動模板在多個區域部署應用，確保所有環境使用相同的基礎配置，只在Auto Scaling組級別調整容量和擴展策略</li>
                    </ul>
                </li>
            </ul>
        </li>
        <li>啟動模板支持版本控制和更多功能
            <ul>
                <li>可以創建多個版本
                    <ul>
                        <li>版本管理：每次修改創建新版本，保留歷史記錄</li>
                        <li>默認版本：可以指定默認版本用於新的Auto Scaling組</li>
                        <li>版本回滾：可以快速切換到之前的配置版本</li>
                        <li>版本限制：每個啟動模板最多可以有10,000個版本</li>
                    </ul>
                </li>
                <li>支持實例元數據選項
                    <ul>
                        <li>IMDSv2：可以要求使用更安全的IMDSv2</li>
                        <li>HTTP令牌：可以要求使用令牌進行元數據訪問</li>
                        <li>跳數限制：可以限制元數據請求的跳數</li>
                        <li>安全增強：防止SSRF(服務器端請求偽造)攻擊</li>
                    </ul>
                </li>
                <li>支持競價型實例請求
                    <ul>
                        <li>競價參數：可以設置最高價格、請求類型等</li>
                        <li>混合實例：可以同時使用按需和競價型實例</li>
                        <li>容量優化：可以選擇最不可能中斷的競價池</li>
                        <li>成本優化：通過競價型實例顯著降低成本</li>
                    </ul>
                </li>
                <li>推薦使用啟動模板而不是啟動配置
                    <ul>
                        <li>功能差異：啟動模板支持更多功能，如版本控制、混合實例策略</li>
                        <li>未來發展：AWS推薦使用啟動模板，啟動配置將逐漸淘汰</li>
                        <li>集成優勢：啟動模板與EC2 Fleet、Spot Fleet更好集成</li>
                        <li>實例例子：一家SaaS提供商使用啟動模板的版本控制功能管理應用部署，每次重大更新創建新版本，同時保留回滾能力，並利用混合實例策略結合按需和競價型實例優化成本</li>
                    </ul>
                </li>
            </ul>
        </li>
    </ul>
    
    <h3>生命週期鉤子</h3>
    <ul>
        <li>在實例啟動或終止過程中執行自定義操作
            <ul>
                <li>可以在實例啟動前後執行操作
                    <ul>
                        <li>啟動生命週期階段：
                            <ul>
                                <li>Pending：實例正在啟動</li>
                                <li>Pending:Wait：暫停以執行自定義操作</li>
                                <li>Pending:Proceed：繼續啟動過程</li>
                                <li>InService：實例已加入服務</li>
                            </ul>
                        </li>
                        <li>啟動鉤子用例：
                            <ul>
                                <li>安裝和配置軟件</li>
                                <li>從配置服務獲取配置</li>
                                <li>加入域或集群</li>
                                <li>向外部系統註冊</li>
                            </ul>
                        </li>
                    </ul>
                </li>
                <li>可以在實例終止前執行操作
                    <ul>
                        <li>終止生命週期階段：
                            <ul>
                                <li>Terminating：實例正在終止</li>
                                <li>Terminating:Wait：暫停以執行自定義操作</li>
                                <li>Terminating:Proceed：繼續終止過程</li>
                                <li>Terminated：實例已終止</li>
                            </ul>
                        </li>
                        <li>終止鉤子用例：
                            <ul>
                                <li>備份數據</li>
                                <li>上傳日誌</li>
                                <li>從外部系統取消註冊</li>
                                <li>發送通知</li>
                            </ul>
                        </li>
                    </ul>
                </li>
                <li>可以暫停實例生命週期
                    <ul>
                        <li>暫停機制：生命週期鉤子可以暫停實例生命週期，等待自定義操作完成</li>
                        <li>超時設置：可以設置超時時間(默認1小時，最長48小時)</li>
                        <li>完成信號：必須發送完成信號(CONTINUE或ABANDON)以繼續生命週期</li>
                        <li>失敗處理：如果鉤子失敗或超時，可以配置為繼續或放棄</li>
                    </ul>
                </li>
            </ul>
        </li>
        <li>用途
            <ul>
                <li>數據備份：在終止前備份數據
                    <ul>
                        <li>實現方式：在Terminating:Wait階段執行腳本，將重要數據備份到S3或EBS快照</li>
                        <li>數據類型：應用數據、配置文件、交易日誌等</li>
                        <li>優先級設置：可以設置備份任務的優先級，確保關鍵數據優先備份</li>
                        <li>實例例子：數據庫服務器在縮減時使用生命週期鉤子確保所有事務完成並將數據備份到S3，然後才允許實例終止</li>
                    </ul>
                </li>
                <li>日誌收集：在終止前收集日誌
                    <ul>
                        <li>實現方式：在Terminating:Wait階段執行腳本，將日誌上傳到集中式日誌存儲</li>
                        <li>日誌類型：應用日誌、系統日誌、安全日誌、訪問日誌等</li>
                        <li>分析準備：可以進行初步處理，如壓縮、過濾或格式轉換</li>
                        <li>實例例子：Web服務器在縮減時使用生命週期鉤子將訪問日誌和錯誤日誌上傳到CloudWatch Logs，確保即使實例終止也能保留完整的日誌記錄</li>
                    </ul>
                </li>
                <li>自定義配置：在啟動後進行配置
                    <ul>
                        <li>實現方式：在Pending:Wait階段執行腳本，進行複雜的配置和初始化</li>
                        <li>配置來源：可以從參數存儲、配置服務器或其他實例獲取配置</li>
                        <li>環境適應：根據部署環境動態調整配置</li>
                        <li>實例例子：應用服務器在啟動時使用生命週期鉤子從AWS Systems Manager Parameter Store獲取配置參數，根據環境(開發、測試、生產)應用不同設置</li>
                    </ul>
                </li>
                <li>與外部系統集成：通知外部系統
                    <ul>
                        <li>實現方式：在生命週期事件發生時調用Lambda函數或發送SNS通知</li>
                        <li>集成目標：監控系統、CMDB、DNS服務、負載均衡器等</li>
                        <li>狀態同步：確保外部系統與Auto Scaling組狀態同步</li>
                        <li>實例例子：微服務架構中，服務實例在啟動時使用生命週期鉤子向服務發現系統(如Consul或Eureka)註冊，在終止前取消註冊，確保流量只路由到健康實例</li>
                    </ul>
                </li>
            </ul>
        </li>
    </ul>
    
    <div class="note">
        <p>考試要點：了解生命週期鉤子的使用場景，特別是在需要在實例啟動或終止時執行自定義操作的情況下。</p>
    </div>
    
    <h2>彈性負載均衡 (ELB)</h2>
    
    <h3>負載均衡器類型</h3>
    <ul>
        <li>應用負載均衡器 (ALB)
            <ul>
                <li>第 7 層負載均衡器，適用於 HTTP/HTTPS 流量
                    <ul>
                        <li>協議支持：HTTP/1.1、HTTP/2、gRPC、WebSockets</li>
                        <li>TLS終止：支持SSL/TLS終止和SNI(服務器名稱指示)</li>
                        <li>身份驗證：支持與Amazon Cognito和OIDC提供商集成</li>
                        <li>安全策略：支持多種TLS安全策略，包括最新的TLS 1.3</li>
                    </ul>
                </li>
                <li>支持基於路徑和主機的路由
                    <ul>
                        <li>路由機制：使用監聽器、規則和目標組</li>
                        <li>路由條件：基於路徑、主機頭、HTTP頭、方法、查詢參數等</li>
                        <li>優先級：規則按優先級順序評估(1-50000)</li>
                        <li>重定向：支持URL重定向和固定響應</li>
                    </ul>
                </li>
                <li>支持微服務和容器
                    <ul>
                        <li>動態端口映射：支持ECS動態端口映射</li>
                        <li>目標組類型：支持實例、IP和Lambda函數</li>
                        <li>IP目標：可以路由到VPC外的IP地址</li>
                        <li>容器集成：與ECS、EKS深度集成</li>
                    </ul>
                </li>
                <li>支持 WebSocket 和 HTTP/2
                    <ul>
                        <li>WebSocket：支持長連接和雙向通信</li>
                        <li>HTTP/2：支持多路復用，提高性能</li>
                        <li>連接處理：自動管理連接升級和保持</li>
                        <li>性能優化：減少延遲，提高吞吐量</li>
                    </ul>
                </li>
                <li>與 AWS WAF 集成
                    <ul>
                        <li>安全防護：防止常見Web攻擊，如SQL注入、XSS</li>
                        <li>規則管理：支持AWS管理的規則和自定義規則</li>
                        <li>速率限制：可以限制請求速率，防止DDoS攻擊</li>
                        <li>地理限制：可以基於來源國家/地區限制訪問</li>
                    </ul>
                </li>
                <li>支持固定會話
                    <ul>
                        <li>會話保持：確保用戶請求路由到同一後端實例</li>
                        <li>實現方式：基於應用程序或負載均衡器生成的cookie</li>
                        <li>持續時間：可配置的會話持續時間</li>
                        <li>適用場景：有狀態應用，如購物車、遊戲會話</li>
                    </ul>
                </li>
            </ul>
        </li>
        <li>網絡負載均衡器 (NLB)
            <ul>
                <li>第 4 層負載均衡器，適用於 TCP/UDP/TLS 流量
                    <ul>
                        <li>協議支持：TCP、UDP、TLS</li>
                        <li>連接處理：保持TCP連接，支持長連接</li>
                        <li>TLS終止：支持TLS終止和直通</li>
                        <li>源端口保留：保留客戶端源IP和端口</li>
                    </ul>
                </li>
                <li>超低延遲，每秒可處理數百萬請求
                    <ul>
                        <li>性能特點：延遲最低至幾微秒</li>
                        <li>擴展能力：自動擴展以處理突發流量</li>
                        <li>連接處理：支持數百萬並發連接</li>
                        <li>適用場景：對延遲敏感的應用，如遊戲、金融交易、實時通信</li>
                    </ul>
                </li>
                <li>支持靜態 IP 和彈性 IP
                    <ul>
                        <li>IP分配：每個可用區一個靜態IP</li>
                        <li>彈性IP：可以將自己的彈性IP分配給負載均衡器</li>
                        <li>DNS解析：支持區域DNS名稱和區域性IP</li>
                        <li>優勢：允許客戶端直接使用IP地址，適合IP白名單場景</li>
                    </ul>
                </li>
                <li>支持 PrivateLink
                    <ul>
                        <li>功能：允許跨VPC和賬戶訪問服務</li>
                        <li>實現方式：作為VPC端點服務的前端</li>
                        <li>安全優勢：無需公共IP或Internet網關</li>
                        <li>使用場景：提供私有服務，如API、數據庫、內部應用</li>
                    </ul>
                </li>
                <li>適合需要極高性能的應用
                    <ul>
                        <li>適用工作負載：數據庫、消息隊列、遊戲服務器</li>
                        <li>協議支持：適合非HTTP協議，如MQTT、RTMP、自定義TCP協議</li>
                        <li>源IP保留：允許後端應用訪問客戶端真實IP</li>
                        <li>實例例子：IoT平台使用NLB處理數百萬設備的MQTT連接，利用靜態IP簡化設備配置，並通過低延遲確保實時消息傳遞</li>
                    </ul>
                </li>
            </ul>
        </li>
        <li>經典負載均衡器 (CLB)
            <ul>
                <li>舊一代負載均衡器，支持第 4 層和第 7 層
                    <ul>
                        <li>混合功能：同時支持HTTP/HTTPS和TCP/SSL</li>
                        <li>歷史背景：AWS最早的負載均衡服務</li>
                        <li>功能限制：缺少ALB的高級路由和NLB的高性能</li>
                        <li>架構：基於早期的ELB架構，不支持最新功能</li>
                    </ul>
                </li>
                <li>功能較少，建議使用 ALB 或 NLB
                    <ul>
                        <li>缺少功能：不支持路徑路由、主機路由、Lambda集成等</li>
                        <li>性能限制：延遲較高，擴展速度較慢</li>
                        <li>監控能力：指標較少，可見性較低</li>
                        <li>遷移路徑：AWS提供從CLB遷移到ALB/NLB的工具</li>
                    </ul>
                </li>
                <li>僅用於現有應用
                    <ul>
                        <li>維護狀態：AWS仍然支持但不再添加新功能</li>
                        <li>遷移建議：新應用應使用ALB或NLB</li>
                        <li>兼容性考慮：某些舊應用可能依賴CLB特定行為</li>
                        <li>實例例子：一家企業保留使用CLB的遺留應用，同時將新開發的微服務架構應用部署在ALB上，計劃在下一次主要版本更新時將舊應用遷移到ALB</li>
                    </ul>
                </li>
            </ul>
        </li>
        <li>網關負載均衡器 (GWLB)
            <ul>
                <li>第 3 層負載均衡器，適用於虛擬設備
                    <ul>
                        <li>工作層級：在OSI模型的第3層(網絡層)運作</li>
                        <li>流量處理：處理所有IP數據包，不僅限於特定協議</li>
                        <li>透明代理：作為透明網絡代理，保留原始數據包</li>
                        <li>設計目的：專為安全和網絡虛擬設備設計</li>
                    </ul>
                </li>
                <li>部署、擴展和管理第三方虛擬設備
                    <ul>
                        <li>擴展管理：自動擴展虛擬設備池</li>
                        <li>高可用性：跨可用區部署，提供冗餘</li>
                        <li>健康檢查：監控設備健康狀態，自動替換故障設備</li>
                        <li>集中管理：簡化多設備部署和配置</li>
                    </ul>
                </li>
                <li>例如：防火牆、入侵檢測系統、深度包檢測系統
                    <ul>
                        <li>安全設備：支持Palo Alto Networks、Fortinet、Check Point等</li>
                        <li>網絡分析：支持Cisco、Juniper等網絡分析設備</li>
                        <li>合規監控：支持數據丟失防護(DLP)和合規監控設備</li>
                        <li>部署模式：支持主動-主動和主動-被動部署</li>
                    </ul>
                </li>
                <li>使用 GENEVE 協議
                    <ul>
                        <li>協議特點：通用網絡虛擬化封裝(GENEVE)協議</li>
                        <li>封裝機制：保留原始數據包，添加元數據</li>
                        <li>流量流向：支持東西向和南北向流量檢查</li>
                        <li>實例例子：一家金融服務公司使用GWLB部署多層安全架構，流量首先通過防火牆，然後經過入侵檢測系統，最後通過DLP設備，所有設備都由GWLB自動擴展和管理，確保所有流量都經過安全檢查而不影響性能</li>
                    </ul>
                </li>
            </ul>
        </li>
    </ul>
    
    <div class="important">
        <p>選擇指南：根據應用需求選擇合適的負載均衡器類型。需要基於內容路由選擇 ALB，需要極高性能或固定 IP 選擇 NLB，需要部署虛擬網絡設備選擇 GWLB。</p>
    </div>
    
    <h3>健康檢查</h3>
    <ul>
        <li>定期檢查實例健康狀態
            <ul>
                <li>支持 HTTP、HTTPS、TCP 健康檢查
                    <ul>
                        <li>HTTP/HTTPS檢查：檢查特定URL路徑的響應代碼</li>
                        <li>TCP檢查：檢查是否可以建立TCP連接</li>
                        <li>協議選擇：根據應用類型選擇適當的協議</li>
                        <li>路徑選擇：應選擇能反映應用真實健康狀態的端點</li>
                    </ul>
                </li>
                <li>可以設置檢查間隔和超時
                    <ul>
                        <li>間隔設置：檢查之間的時間(5-300秒)</li>
                        <li>超時設置：等待響應的時間(2-120秒)</li>
                        <li>平衡考慮：較短間隔可更快檢測故障，但增加負載</li>
                        <li>最佳實踐：間隔通常設置為30秒，超時設置為5秒</li>
                    </ul>
                </li>
                <li>可以設置健康閾值和不健康閾值
                    <ul>
                        <li>健康閾值：連續成功檢查次數(2-10)，實例被視為健康</li>
                        <li>不健康閾值：連續失敗檢查次數(2-10)，實例被視為不健康</li>
                        <li>閾值平衡：較低閾值可更快響應狀態變化，但可能導致頻繁切換</li>
                        <li>建議設置：健康閾值通常設置為2-3，不健康閾值設置為2-3</li>
                    </ul>
                </li>
            </ul>
        </li>
        <li>自動從負載均衡中移除不健康的實例
            <ul>
                <li>防止將流量發送到不健康的實例
                    <ul>
                        <li>流量管理：停止向不健康實例發送新請求</li>
                        <li>連接處理：現有連接可能會繼續，取決於負載均衡器類型</li>
                        <li>故障隔離：防止單個實例故障影響整個服務</li>
                        <li>用戶體驗：減少錯誤響應，提高服務可用性</li>
                    </ul>
                </li>
                <li>實例恢復健康後自動重新加入
                    <ul>
                        <li>自動恢復：實例通過健康檢查後自動重新接收流量</li>
                        <li>預熱時間：可以設置預熱時間，逐漸增加流量</li>
                        <li>無需手動干預：自動化恢復過程</li>
                        <li>實例例子：一個Web應用集群中的實例因內存泄漏變得不健康，ELB自動將其從負載均衡中移除，運維團隊重啟實例後，它通過健康檢查並自動重新加入服務，整個過程對用戶透明</li>
                    </ul>
                </li>
            </ul>
        </li>
        <li>支持自定義健康檢查路徑和閾值
            <ul>
                <li>可以檢查應用特定的端點
                    <ul>
                        <li>專用健康端點：創建/health或/status等專用端點</li>
                        <li>深度檢查：可以檢查應用的關鍵組件(數據庫連接、緩存等)</li>
                        <li>輕量級設計：健康檢查端點應快速響應，避免重操作</li>
                        <li>安全考慮：可能需要限制健康檢查端點的訪問</li>
                    </ul>
                </li>
                <li>可以設置自定義響應代碼
                    <ul>
                        <li>響應代碼：可以指定哪些HTTP狀態碼視為成功(默認200)</li>
                        <li>多代碼支持：可以接受多個成功代碼(如200-299)</li>
                        <li>特殊場景：某些應用可能使用非標準代碼表示健康狀態</li>
                        <li>實例例子：電子商務網站為ELB配置了自定義健康檢查，檢查/api/health端點，該端點不僅驗證Web服務器運行狀態，還檢查數據庫連接、支付處理系統和庫存服務的可用性，只有所有關鍵組件都正常時才返回200狀態碼</li>
                    </ul>
                </li>
            </ul>
        </li>
    </ul>
    
    <h3>粘性會話</h3>
    <ul>
        <li>將用戶會話綁定到特定實例
            <ul>
                <li>確保用戶請求發送到同一實例
                    <ul>
                        <li>會話保持：負載均衡器記住用戶與實例的關聯</li>
                        <li>實現機制：使用cookie或源IP進行識別</li>
                        <li>持續時間：可配置的粘性持續時間(1秒到7天)</li>
                        <li>故障處理：如果目標實例不健康，會重新分配到新實例</li>
                    </ul>
                </li>
                <li>適合有狀態應用
                    <ul>
                        <li>適用場景：購物車、遊戲會話、多步驟表單</li>
                        <li>會話數據：在實例內存中保存用戶會話數據</li>
                        <li>性能優勢：減少跨實例數據同步需求</li>
                        <li>擴展考慮：粘性會話可能導致負載不均衡</li>
                    </ul>
                </li>
            </ul>
        </li>
        <li>基於應用程序或負載均衡器生成的 cookie
            <ul>
                <li>應用程序生成的 cookie：應用程序控制粘性持續時間
                    <ul>
                        <li>工作原理：應用程序生成cookie，ELB使用該cookie路由請求</li>
                        <li>cookie名稱：使用AWSELB或自定義名稱</li>
                        <li>控制優勢：應用程序可以完全控制會話持續時間和失效</li>
                        <li>實現複雜性：需要應用程序代碼支持</li>
                    </ul>
                </li>
                <li>負載均衡器生成的 cookie：ELB 控制粘性持續時間
                    <ul>
                        <li>工作原理：ELB自動生成和管理cookie(AWSELB/AWSALB)</li>
                        <li>配置簡單：無需修改應用程序代碼</li>
                        <li>持續時間：在負載均衡器級別配置</li>
                        <li>限制：無法根據應用程序邏輯動態調整</li>
                    </ul>
                </li>
            </ul>
        </li>
        <li>ALB 和 CLB 支持粘性會話，NLB 通過源 IP 支持粘性
            <ul>
                <li>ALB粘性：基於應用程序或負載均衡器生成的cookie</li>
                <li>CLB粘性：基於應用程序或負載均衡器生成的cookie</li>
                <li>NLB粘性：基於客戶端的源IP地址</li>
                <li>實例例子：一個在線教育平台使用ALB的粘性會話功能，確保學生在整個考試過程中始終連接到同一後端服務器，避免會話數據丟失。同時，他們的實時視頻流服務使用NLB的源IP粘性，確保UDP流量保持連接穩定性</li>
            </ul>
        </li>
    </ul>
    
    <h3>跨區域負載均衡</h3>
    <ul>
        <li>在多個區域之間分配流量
            <ul>
                <li>ALB 和 CLB 支持跨可用區負載均衡
                    <ul>
                        <li>工作原理：在所有啟用的可用區之間均勻分配流量</li>
                        <li>負載均衡器節點：在每個啟用的可用區部署節點</li>
                        <li>流量分配：不考慮各可用區實例數量的差異</li>
                        <li>區別：NLB默認按實例比例分配流量</li>
                    </ul>
                </li>
                <li>可以啟用或禁用
                    <ul>
                        <li>啟用效果：流量均勻分配到所有可用區</li>
                        <li>禁用效果：流量按實例比例分配，實例較多的可用區接收更多流量</li>
                        <li>成本考慮：啟用時可能產生跨可用區數據傳輸費用</li>
                        <li>默認設置：ALB和CLB默認啟用，NLB默認禁用</li>
                    </ul>
                </li>
                <li>默認啟用
                    <ul>
                        <li>自動配置：創建ALB或CLB時自動啟用</li>
                        <li>修改選項：可以通過API或控制台修改設置</li>
                        <li>最佳實踐：大多數情況下建議保持啟用狀態</li>
                        <li>特殊場景：某些需要精確控制流量分配的場景可能需要禁用</li>
                    </ul>
                </li>
            </ul>
        </li>
        <li>提高可用性和災難恢復能力
            <ul>
                <li>即使一個可用區出現故障，應用仍然可用
                    <ul>
                        <li>故障隔離：可用區是獨立的故障域</li>
                        <li>自動故障轉移：負載均衡器自動檢測可用區故障</li>
                        <li>容量規劃：應考慮N+1可用區容量，確保一個可用區故障時仍有足夠容量</li>
                        <li>RTO/RPO：顯著降低恢復時間目標(RTO)和恢復點目標(RPO)</li>
                    </ul>
                </li>
                <li>流量自動重新分配到健康的可用區
                    <ul>
                        <li>健康檢查：負載均衡器持續監控後端實例健康狀態</li>
                        <li>流量路由：只將流量發送到健康的實例</li>
                        <li>自動擴展：結合Auto Scaling可以在健康的可用區自動擴展容量</li>
                        <li>實例例子：一家金融服務公司的支付處理系統部署在三個可用區，當一個可用區發生網絡中斷時，ELB自動將流量路由到其他兩個可用區的健康實例，用戶無感知服務中斷</li>
                    </ul>
                </li>
            </ul>
        </li>
        <li>跨區域負載均衡與 Route 53 結合使用可以實現跨區域高可用性
            <ul>
                <li>區域故障保護：防止整個AWS區域故障的影響</li>
                <li>實現方式：在多個區域部署負載均衡器，使用Route 53進行DNS路由</li>
                <li>路由策略：可以使用加權、延遲、地理位置或故障轉移路由策略</li>
                <li>全球部署：實現真正的全球高可用性架構</li>
                <li>實例例子：一家全球電子商務平台在美國東部、歐洲和亞洲各部署了一套完整的應用堆棧，每個區域使用ELB實現區域內高可用性，同時使用Route 53的延遲路由將用戶導向最近的區域，當一個區域出現問題時，Route 53健康檢查會自動將流量路由到健康的區域</li>
            </ul>
        </li>
    </ul>
    
    <div class="note">
        <p>考試要點：了解不同負載均衡器類型的特點和使用場景，以及如何配置健康檢查和粘性會話以提高應用的可用性和用戶體驗。</p>
    </div>
    
    <h2>容器服務</h2>
    
    <h3>Amazon ECS (彈性容器服務)</h3>
    <ul>
        <li>完全托管的容器編排服務
            <ul>
                <li>支持 Docker 容器
                    <ul>
                        <li>容器標準：基於開放容器倡議(OCI)標準</li>
                        <li>映像兼容性：支持任何Docker兼容的容器映像</li>
                        <li>映像來源：可以使用ECR、Docker Hub或私有註冊表</li>
                        <li>多容器支持：一個任務可以包含多個相關容器</li>
                    </ul>
                </li>
                <li>與 AWS 服務深度集成
                    <ul>
                        <li>網絡：VPC、安全組、彈性網絡接口</li>
                        <li>存儲：EBS、EFS、FSx</li>
                        <li>安全：IAM角色、Secrets Manager、KMS</li>
                        <li>監控：CloudWatch、X-Ray、Container Insights</li>
                        <li>部署：CodePipeline、CodeDeploy、CloudFormation</li>
                    </ul>
                </li>
                <li>可以在 EC2 或 Fargate 上運行
                    <ul>
                        <li>混合模式：同一集群可以同時使用EC2和Fargate</li>
                        <li>遷移路徑：可以從EC2平滑遷移到Fargate</li>
                        <li>選擇因素：基於成本、控制需求和工作負載特性</li>
                        <li>實例例子：一家SaaS公司使用混合ECS集群，將需要精細控制和高性能的數據處理工作負載部署在EC2上，同時將Web API和批處理作業部署在Fargate上，實現成本和運維的平衡</li>
                    </ul>
                </li>
            </ul>
        </li>
        <li>關鍵概念
            <ul>
                <li>集群：EC2 實例或 Fargate 容量的邏輯分組
                    <ul>
                        <li>資源邊界：集群是ECS資源的邊界</li>
                        <li>容量提供者：定義集群使用的計算資源</li>
                        <li>多可用區：集群可以跨多個可用區</li>
                        <li>擴展管理：支持Auto Scaling集群容量</li>
                    </ul>
                </li>
                <li>任務定義：容器的藍圖，定義容器映像、CPU、內存等
                    <ul>
                        <li>版本控制：支持任務定義版本</li>
                        <li>資源分配：定義CPU、內存、GPU需求</li>
                        <li>網絡配置：端口映射、網絡模式</li>
                        <li>存儲配置：數據卷、掛載點</li>
                        <li>環境變量：配置、密鑰、動態參數</li>
                    </ul>
                </li>
                <li>任務：任務定義的實例，代表正在運行的容器
                    <ul>
                        <li>生命週期：任務有啟動、運行、停止的生命週期</li>
                        <li>調度：可以手動或通過服務調度</li>
                        <li>資源隔離：每個任務有獨立的資源</li>
                        <li>日誌收集：支持將容器日誌發送到CloudWatch</li>
                    </ul>
                </li>
                <li>服務：維護指定數量的任務
                    <ul>
                        <li>高可用性：確保指定數量的任務始終運行</li>
                        <li>負載均衡：與ELB集成分發流量</li>
                        <li>部署策略：支持滾動更新、藍綠部署</li>
                        <li>服務發現：與Cloud Map集成實現服務發現</li>
                        <li>自動擴展：基於CPU、內存或自定義指標自動擴展</li>
                    </ul>
                </li>
            </ul>
        </li>
        <li>啟動類型
            <ul>
                <li>EC2：在自管理的 EC2 實例上運行容器
                    <ul>
                        <li>控制級別：完全控制底層實例</li>
                        <li>成本優化：可以使用預留實例、Savings Plans和競價型實例</li>
                        <li>特殊硬件：支持GPU、高內存等特殊實例類型</li>
                        <li>容量管理：需要管理EC2容量池</li>
                        <li>適用場景：長時間運行的工作負載、需要特殊硬件的應用、大規模部署</li>
                    </ul>
                </li>
                <li>Fargate：無需管理底層基礎設施
                    <ul>
                        <li>無服務器：按需分配資源，無需管理服務器</li>
                        <li>精細計費：按vCPU和內存用量按秒計費</li>
                        <li>隔離模型：每個任務都有自己的隔離環境</li>
                        <li>資源控制：可以精確指定每個任務的CPU和內存</li>
                        <li>適用場景：變化的工作負載、批處理作業、低運維需求的應用</li>
                    </ul>
                </li>
            </ul>
        </li>
        <li>與其他 AWS 服務集成
            <ul>
                <li>ALB/NLB：負載均衡
                    <ul>
                        <li>動態端口映射：ALB支持動態主機端口映射</li>
                        <li>路徑路由：基於路徑將流量路由到不同服務</li>
                        <li>健康檢查：自動檢測容器健康狀態</li>
                        <li>TLS終止：在負載均衡器層處理HTTPS</li>
                    </ul>
                </li>
                <li>IAM：安全和訪問控制
                    <ul>
                        <li>任務角色：每個任務可以有獨立的IAM角色</li>
                        <li>執行角色：控制ECS代表用戶執行操作的權限</li>
                        <li>細粒度控制：基於資源和標籤的權限</li>
                        <li>臨時憑證：自動管理和輪換憑證</li>
                    </ul>
                </li>
                <li>CloudWatch：監控和日誌
                    <ul>
                        <li>指標收集：CPU、內存、網絡等資源使用情況</li>
                        <li>日誌聚合：自動收集容器日誌</li>
                        <li>警報：基於指標設置警報</li>
                        <li>Container Insights：提供集群、服務和任務級別的詳細監控</li>
                    </ul>
                </li>
                <li>ECR：容器映像存儲
                    <ul>
                        <li>私有註冊表：安全存儲和管理容器映像</li>
                        <li>映像掃描：自動檢測安全漏洞</li>
                        <li>生命週期策略：自動管理映像版本</li>
                        <li>跨賬戶訪問：支持跨賬戶映像共享</li>
                    </ul>
                </li>
            </ul>
        </li>
    </ul>
    
    <h3>Amazon EKS (彈性 Kubernetes 服務)</h3>
    <ul>
        <li>托管的 Kubernetes 服務
            <ul>
                <li>標準 Kubernetes API
                    <ul>
                        <li>兼容性：100%兼容上游Kubernetes</li>
                        <li>版本支持：通常支持最新的三個Kubernetes版本</li>
                        <li>API訪問：標準kubectl和Kubernetes API</li>
                        <li>認證集成：與AWS IAM集成進行身份驗證</li>
                    </ul>
                </li>
                <li>與現有 Kubernetes 工具兼容
                    <ul>
                        <li>生態系統：支持Helm、Kustomize等工具</li>
                        <li>CI/CD：與Jenkins、GitLab、ArgoCD等集成</li>
                        <li>監控：支持Prometheus、Grafana、Datadog等</li>
                        <li>網絡：支持Calico、Cilium等CNI插件</li>
                        <li>存儲：支持各種CSI驅動程序</li>
                    </ul>
                </li>
                <li>可以在 EC2、Fargate 或本地運行
                    <ul>
                        <li>混合部署：同一集群可以混合使用EC2和Fargate</li>
                        <li>多環境：支持雲端、本地和邊緣環境</li>
                        <li>遷移路徑：支持從自管理Kubernetes遷移</li>
                        <li>實例例子：一家醫療科技公司使用EKS部署其醫療影像處理平台，敏感數據處理在本地EKS Anywhere集群上進行，而Web前端和API在AWS EKS上運行，實現了合規性和靈活性的平衡</li>
                    </ul>
                </li>
            </ul>
        </li>
        <li>關鍵特性
            <ul>
                <li>托管控制平面：自動升級和修補
                    <ul>
                        <li>高可用性：控制平面跨三個可用區部署</li>
                        <li>版本管理：簡化的Kubernetes版本升級</li>
                        <li>修補自動化：自動應用安全修補</li>
                        <li>擴展管理：自動擴展控制平面以處理負載</li>
                    </ul>
                </li>
                <li>多可用區高可用性
                    <ul>
                        <li>控制平面：跨三個可用區冗餘部署</li>
                        <li>數據平面：工作節點可以跨多個可用區</li>
                        <li>etcd：托管的etcd集群，跨可用區複製</li>
                        <li>故障域：設計為容忍單一可用區故障</li>
                    </ul>
                </li>
                <li>與 AWS 服務集成
                    <ul>
                        <li>身份管理：與IAM集成進行身份驗證</li>
                        <li>網絡：與VPC、安全組、ALB/NLB集成</li>
                        <li>存儲：與EBS、EFS、FSx集成</li>
                        <li>監控：與CloudWatch、Container Insights集成</li>
                        <li>安全：與KMS、Secrets Manager集成</li>
                    </ul>
                </li>
                <li>支持 Kubernetes 插件
                    <ul>
                        <li>AWS管理的插件：VPC CNI、CoreDNS、kube-proxy</li>
                        <li>附加組件：AWS Load Balancer Controller、Cluster Autoscaler</li>
                        <li>合作夥伴解決方案：Datadog、New Relic、Dynatrace等</li>
                        <li>自定義插件：支持自定義和社區插件</li>
                    </ul>
                </li>
            </ul>
        </li>
        <li>部署選項
            <ul>
                <li>EC2：自定義和控制節點
                    <ul>
                        <li>節點類型：支持幾乎所有EC2實例類型</li>
                        <li>節點組：管理相似配置節點的集合</li>
                        <li>自動擴展：支持Cluster Autoscaler和Karpenter</li>
                        <li>自定義AMI：可以使用自定義節點AMI</li>
                        <li>適用場景：需要特定硬件、GPU、高性能網絡的工作負載</li>
                    </ul>
                </li>
                <li>Fargate：無需管理節點
                    <ul>
                        <li>Pod執行：每個Pod在獨立的Fargate環境中運行</li>
                        <li>Fargate配置文件：定義哪些Pod使用Fargate</li>
                        <li>資源分配：基於Pod請求自動分配資源</li>
                        <li>限制：不支持DaemonSets、特權容器</li>
                        <li>適用場景：無需管理基礎設施的微服務、批處理作業</li>
                    </ul>
                </li>
                <li>EKS Anywhere：在本地運行 EKS
                    <ul>
                        <li>部署環境：數據中心、邊緣位置</li>
                        <li>基礎設施支持：VMware vSphere、裸機</li>
                        <li>一致性：與EKS相同的Kubernetes發行版</li>
                        <li>生命週期管理：簡化的集群創建和升級</li>
                        <li>適用場景：混合雲、低延遲要求、數據主權</li>
                    </ul>
                </li>
                <li>EKS Distro：自行托管 Kubernetes
                    <ul>
                        <li>開源發行版：與EKS相同的Kubernetes發行版</li>
                        <li>長期支持：與EKS相同的支持週期</li>
                        <li>安全修補：定期安全更新</li>
                        <li>完全控制：自行管理所有組件</li>
                        <li>適用場景：需要完全控制的環境，如高度監管行業</li>
                    </ul>
                </li>
            </ul>
        </li>
        <li>網絡和安全
            <ul>
                <li>VPC CNI 插件
                    <ul>
                        <li>網絡模型：為Pod分配VPC IP地址</li>
                        <li>安全組：支持Pod級別安全組</li>
                        <li>IP管理：支持自定義CIDR和前綴分配</li>
                        <li>性能：提供原生VPC網絡性能</li>
                        <li>替代選項：支持Calico、Cilium等替代CNI</li>
                    </ul>
                </li>
                <li>Pod 安全策略
                    <ul>
                        <li>安全控制：限制Pod的安全上下文</li>
                        <li>權限管理：控制特權容器、主機命名空間訪問</li>
                        <li>卷控制：限制可掛載的卷類型</li>
                        <li>升級路徑：逐漸被Pod Security Admission替代</li>
                    </ul>
                </li>
                <li>IAM 角色用於服務賬戶
                    <ul>
                        <li>細粒度權限：為特定Pod分配IAM權限</li>
                        <li>臨時憑證：自動管理和輪換AWS憑證</li>
                        <li>無需節點角色：減少節點IAM權限範圍</li>
                        <li>實現方式：通過服務賬戶註釋和OIDC提供商</li>
                    </ul>
                </li>
                <li>私有集群支持
                    <ul>
                        <li>API端點：支持私有API端點</li>
                        <li>網絡隔離：無需公共互聯網訪問</li>
                        <li>VPC端點：通過VPC端點訪問AWS服務</li>
                        <li>安全優勢：減少攻擊面，提高合規性</li>
                        <li>實例例子：一家金融服務公司使用私有EKS集群部署其交易平台，API服務器僅通過私有端點訪問，所有節點都在私有子網中，通過VPC端點與AWS服務通信，實現了完全隔離的安全環境</li>
                    </ul>
                </li>
            </ul>
        </li>
    </ul>
    
    <div class="important">
        <p>選擇指南：如果已經使用 Kubernetes 或需要更多控制和可移植性，選擇 EKS；如果希望更簡單的容器編排和更深入的 AWS 集成，選擇 ECS。</p>
    </div>
    
    <h3>AWS Fargate</h3>
    <ul>
        <li>無服務器容器計算引擎
            <ul>
                <li>無需管理底層基礎設施
                    <ul>
                        <li>抽象層級：完全抽象底層EC2實例</li>
                        <li>運維優勢：無需管理操作系統、修補、容量規劃</li>
                        <li>資源分配：AWS自動管理資源分配和調度</li>
                        <li>隔離模型：每個任務/Pod有自己的隔離環境</li>
                    </ul>
                </li>
                <li>按需付費，按容器級別計費
                    <ul>
                        <li>計費單位：vCPU和內存，按秒計費</li>
                        <li>最小計費：最低1分鐘</li>
                        <li>資源規格：vCPU(0.25-16)和內存(0.5-120GB)</li>
                        <li>成本優化：Compute Savings Plans可降低成本</li>
                        <li>空閒成本：不運行容器時不產生費用</li>
                    </ul>
                </li>
                <li>與 ECS 和 EKS 兼容
                    <ul>
                        <li>ECS集成：作為ECS的啟動類型</li>
                        <li>EKS集成：通過Fargate配置文件運行Kubernetes Pod</li>
                        <li>部署模型：可以混合使用EC2和Fargate</li>
                        <li>遷移路徑：可以從EC2逐步遷移到Fargate</li>
                    </ul>
                </li>
            </ul>
        </li>
        <li>優勢
            <ul>
                <li>減少運維負擔
                    <ul>
                        <li>無服務器模型：無需管理服務器、集群容量或修補</li>
                        <li>自動化：自動處理基礎設施管理任務</li>
                        <li>專注應用：開發人員可以專注於應用程序邏輯</li>
                        <li>運維成本：減少DevOps團隊的工作量</li>
                    </ul>
                </li>
                <li>按需擴展
                    <ul>
                        <li>自動擴展：根據需求自動擴展容量</li>
                        <li>無需預置：無需預先配置容量</li>
                        <li>精確擴展：按任務/Pod級別擴展，而非實例級別</li>
                        <li>冷啟動優化：支持預置並發以減少冷啟動時間</li>
                    </ul>
                </li>
                <li>提高安全性（每個任務隔離）
                    <ul>
                        <li>隔離模型：每個任務在獨立的虛擬機中運行</li>
                        <li>安全邊界：任務之間有明確的安全邊界</li>
                        <li>減少攻擊面：最小化共享資源</li>
                        <li>IAM集成：每個任務可以有自己的IAM角色</li>
                    </ul>
                </li>
                <li>精確的資源控制
                    <ul>
                        <li>資源分配：精確指定每個任務的CPU和內存</li>
                        <li>資源保證：保證分配的資源可用</li>
                        <li>成本控制：只為使用的資源付費</li>
                        <li>實例例子：一家媒體處理公司使用Fargate運行其視頻轉碼服務，每個轉碼任務在獨立的Fargate任務中運行，根據視頻大小和複雜度分配不同的CPU和內存資源，實現了精確的資源控制和成本優化</li>
                    </ul>
                </li>
            </ul>
        </li>
        <li>限制
            <ul>
                <li>啟動時間較長
                    <ul>
                        <li>冷啟動延遲：首次啟動可能需要10-30秒</li>
                        <li>預置並發：可以使用預置並發減少冷啟動時間</li>
                        <li>不適用場景：對啟動時間極為敏感的應用</li>
                        <li>優化策略：使用預熱池或保持最小任務數</li>
                    </ul>
                </li>
                <li>不支持 GPU 工作負載
                    <ul>
                        <li>硬件限制：不支持GPU、FPGA等特殊硬件</li>
                        <li>替代方案：需要GPU的工作負載應使用EC2</li>
                        <li>適用場景：CPU密集型而非GPU密集型工作負載</li>
                        <li>未來發展：AWS可能在未來添加GPU支持</li>
                    </ul>
                </li>
                <li>不支持特定的 Kubernetes 功能
                    <ul>
                        <li>EKS限制：不支持DaemonSets、特權容器、HostNetwork</li>
                        <li>存儲限制：不支持某些持久卷類型</li>
                        <li>網絡限制：不支持自定義CNI插件</li>
                        <li>混合模式：可以使用混合模式，關鍵Pod在EC2上運行</li>
                    </ul>
                </li>
                <li>成本可能高於 EC2
                    <ul>
                        <li>價格比較：對於高利用率的長期工作負載，EC2可能更經濟</li>
                        <li>成本因素：Fargate包含了管理開銷的成本</li>
                        <li>優化策略：使用Compute Savings Plans降低Fargate成本</li>
                        <li>實例例子：一家電子商務公司將其高流量、穩定的Web服務器保留在EC2上以優化成本，同時將變化的批處理作業和低流量的微服務遷移到Fargate，實現了成本和運維的平衡</li>
                    </ul>
                </li>
            </ul>
        </li>
    </ul>
    
    <h3>Amazon ECR (彈性容器註冊表)</h3>
    <ul>
        <li>完全托管的容器映像註冊表
            <ul>
                <li>存儲、管理和部署容器映像
                    <ul>
                        <li>映像管理：集中存儲和版本控制Docker映像</li>
                        <li>可靠性：高可用性設計，99.9%可用性SLA</li>
                        <li>性能：使用Amazon S3作為後端存儲，提供高吞吐量</li>
                        <li>全球訪問：支持跨區域複製和緩存</li>
                    </ul>
                </li>
                <li>與 ECS 和 EKS 集成
                    <ul>
                        <li>無縫集成：ECS和EKS可以直接從ECR拉取映像</li>
                        <li>IAM認證：使用IAM角色自動處理映像拉取認證</li>
                        <li>部署流程：支持CI/CD管道自動部署</li>
                        <li>映像緩存：在節點上緩存映像以提高性能</li>
                    </ul>
                </li>
                <li>支持私有和公共存儲庫
                    <ul>
                        <li>私有存儲庫：限制訪問的私有映像</li>
                        <li>公共存儲庫：可公開訪問的映像</li>
                        <li>訪問控制：基於IAM的細粒度權限</li>
                        <li>共享模型：支持跨賬戶和跨組織共享</li>
                    </ul>
                </li>
            </ul>
        </li>
        <li>特性
            <ul>
                <li>高可用性和可擴展性
                    <ul>
                        <li>區域冗餘：在多個可用區自動複製數據</li>
                        <li>擴展能力：自動擴展以處理高並發拉取</li>
                        <li>性能優化：使用內容分發網絡加速映像分發</li>
                        <li>無限容量：無需管理存儲容量</li>
                    </ul>
                </li>
                <li>與 IAM 集成進行訪問控制
                    <ul>
                        <li>身份認證：使用IAM進行身份驗證和授權</li>
                        <li>資源策略：支持存儲庫級別的資源策略</li>
                        <li>跨賬戶訪問：控制跨賬戶映像共享</li>
                        <li>臨時憑證：支持臨時訪問憑證</li>
                    </ul>
                </li>
                <li>映像掃描和生命週期策略
                    <ul>
                        <li>安全掃描：自動或手動掃描映像中的漏洞</li>
                        <li>掃描結果：提供漏洞嚴重性和修復建議</li>
                        <li>生命週期管理：自動清理未使用或過期的映像</li>
                        <li>標籤不可變性：防止覆蓋現有標籤</li>
                    </ul>
                </li>
                <li>跨區域和跨賬戶複製
                    <ul>
                        <li>地理分佈：將映像複製到多個AWS區域</li>
                        <li>災難恢復：作為災難恢復策略的一部分</li>
                        <li>全球部署：支持全球應用部署</li>
                        <li>實例例子：一家全球電子商務公司使用ECR存儲其微服務容器映像，並設置自動跨區域複製，確保其在北美、歐洲和亞洲的部署可以快速訪問相同版本的映像，同時使用映像掃描確保所有部署的容器都沒有已知安全漏洞</li>
                    </ul>
                </li>
            </ul>
        </li>
        <li>安全性
            <ul>
                <li>傳輸中和靜態加密
                    <ul>
                        <li>靜態加密：使用AWS KMS自動加密存儲的映像</li>
                        <li>傳輸加密：使用HTTPS/TLS加密所有傳輸</li>
                        <li>密鑰管理：支持客戶管理的KMS密鑰</li>
                        <li>合規性：滿足PCI DSS、HIPAA等合規要求</li>
                    </ul>
                </li>
                <li>映像簽名和驗證
                    <ul>
                        <li>簽名驗證：支持Docker Content Trust</li>
                        <li>映像完整性：確保映像未被篡改</li>
                        <li>信任鏈：建立從開發到部署的信任鏈</li>
                        <li>部署控制：可以限制只部署已簽名的映像</li>
                    </ul>
                </li>
                <li>漏洞掃描
                    <ul>
                        <li>掃描引擎：使用Clair開源掃描引擎</li>
                        <li>掃描頻率：支持推送時掃描和定期掃描</li>
                        <li>CVE數據庫：定期更新漏洞數據庫</li>
                        <li>嚴重性分類：按嚴重性級別分類漏洞</li>
                    </ul>
                </li>
                <li>細粒度的訪問控制
                    <ul>
                        <li>IAM策略：基於身份和資源的策略</li>
                        <li>操作級別：控制推送、拉取、刪除等特定操作</li>
                        <li>標籤控制：基於標籤的訪問控制</li>
                        <li>實例例子：一家金融科技公司使用ECR的細粒度訪問控制，確保只有授權的CI/CD管道可以推送生產映像，而開發團隊只能推送到開發存儲庫，同時強制執行映像掃描策略，確保所有部署到生產環境的容器都沒有高危漏洞</li>
                    </ul>
                </li>
            </ul>
        </li>
    </ul>
    
    <div class="note">
        <p>考試要點：了解容器服務的特點和使用場景，特別是 ECS 和 EKS 的區別，以及何時選擇 Fargate 而不是 EC2 啟動類型。</p>
    </div>
    
    <h2>無服務器計算</h2>
    
    <h3>AWS Lambda</h3>
    <ul>
        <li>無服務器計算服務
            <ul>
                <li>運行代碼而無需管理服務器
                    <ul>
                        <li>無服務器模型：AWS管理所有基礎設施</li>
                        <li>運行環境：代碼在隔離的容器中執行</li>
                        <li>資源分配：自動分配計算資源</li>
                        <li>運維優勢：無需管理服務器、修補或擴展</li>
                    </ul>
                </li>
                <li>按使用量付費（執行時間和內存）
                    <ul>
                        <li>計費單位：按執行時間(毫秒)和分配內存計費</li>
                        <li>免費層：每月包含100萬次請求和400,000 GB-秒計算時間</li>
                        <li>無閒置費用：不執行時不產生費用</li>
                        <li>成本優化：可以通過調整內存和執行時間優化成本</li>
                    </ul>
                </li>
                <li>自動擴展
                    <ul>
                        <li>並發模型：自動擴展以處理並發請求</li>
                        <li>擴展速度：可以每秒擴展數千個實例</li>
                        <li>並發限制：默認賬戶並發限制為1,000</li>
                        <li>預留並發：可以為關鍵函數預留並發</li>
                    </ul>
                </li>
                <li>支持多種編程語言
                    <ul>
                        <li>原生支持：Node.js、Python、Java、Go、.NET、Ruby</li>
                        <li>自定義運行時：支持任何語言的自定義運行時</li>
                        <li>容器映像：支持使用容器映像部署函數</li>
                        <li>實例例子：一家媒體公司使用Lambda處理用戶上傳的圖片，使用Python函數自動調整大小、添加水印並生成縮略圖，利用Lambda的自動擴展處理上傳高峰，同時在低流量時段不產生任何費用</li>
                    </ul>
                </li>
            </ul>
        </li>
        <li>關鍵概念
            <ul>
                <li>函數：執行代碼的基本單位
                    <ul>
                        <li>處理程序：函數的入口點</li>
                        <li>上下文對象：提供運行時信息</li>
                        <li>環境變量：配置函數行為</li>
                        <li>部署包：包含代碼和依賴項</li>
                    </ul>
                </li>
                <li>事件源：觸發函數的服務或資源
                    <ul>
                        <li>AWS服務：S3、DynamoDB、Kinesis、SQS等</li>
                        <li>自定義應用：通過API Gateway或SDK調用</li>
                        <li>事件模式：推送模型和輪詢模型</li>
                        <li>事件過濾：可以基於事件屬性過濾</li>
                    </ul>
                </li>
                <li>觸發器：將事件源映射到函數
                    <ul>
                        <li>配置方式：在Lambda控制台或通過IaC工具配置</li>
                        <li>映射類型：直接調用或事件源映射</li>
                        <li>批處理：支持批量處理事件</li>
                        <li>錯誤處理：可配置重試策略和死信隊列</li>
                    </ul>
                </li>
                <li>層：可重用的代碼和庫
                    <ul>
                        <li>共享代碼：跨多個函數共享代碼</li>
                        <li>版本控制：支持層版本</li>
                        <li>大小限制：每個函數最多可添加5層</li>
                        <li>使用場景：共享庫、自定義運行時、大型依賴項</li>
                    </ul>
                </li>
            </ul>
        </li>
        <li>限制和配置
            <ul>
                <li>執行時間：最長 15 分鐘
                    <ul>
                        <li>超時設置：可配置1秒到15分鐘</li>
                        <li>長時間任務：超過15分鐘的任務應拆分或使用Step Functions</li>
                        <li>最佳實踐：設計短小、專注的函數</li>
                        <li>超時處理：函數超時時會被強制終止</li>
                    </ul>
                </li>
                <li>內存：128MB 到 10GB
                    <ul>
                        <li>配置增量：1MB增量</li>
                        <li>CPU分配：CPU與內存成比例分配</li>
                        <li>性能調優：增加內存也會增加CPU能力</li>
                        <li>成本影響：內存配置直接影響成本</li>
                    </ul>
                </li>
                <li>臨時存儲：512MB 到 10GB
                    <ul>
                        <li>存儲位置：/tmp目錄</li>
                        <li>生命週期：僅在函數執行期間可用</li>
                        <li>使用場景：處理臨時文件、下載大文件</li>
                        <li>限制：不適合持久存儲，應使用S3等服務</li>
                    </ul>
                </li>
                <li>並發執行：1000（可提高）
                    <ul>
                        <li>並發類型：預留並發和預置並發</li>
                        <li>限制提高：可以請求提高賬戶限制</li>
                        <li>區域限制：並發限制按區域計算</li>
                        <li>實例例子：一家電子商務網站在黑色星期五使用Lambda處理訂單，通過提前請求提高並發限制並為關鍵函數配置預留並發，確保即使在極高流量下也能保持訂單處理的可靠性</li>
                    </ul>
                </li>
            </ul>
        </li>
        <li>集成和用例
            <ul>
                <li>API Gateway：創建 REST API
                    <ul>
                        <li>集成類型：代理集成和非代理集成</li>
                        <li>授權：支持多種授權方式</li>
                        <li>API管理：版本控制、階段、部署</li>
                        <li>用例：無服務器Web API、微服務後端</li>
                    </ul>
                </li>
                <li>S3：處理對象事件
                    <ul>
                        <li>事件類型：創建、刪除、還原等</li>
                        <li>過濾器：基於前綴、後綴過濾</li>
                        <li>批處理：可配置批處理大小</li>
                        <li>用例：圖像處理、日誌分析、數據轉換</li>
                    </ul>
                </li>
                <li>DynamoDB：處理數據庫事件
                    <ul>
                        <li>流處理：處理DynamoDB Streams事件</li>
                        <li>變更捕獲：插入、更新、刪除操作</li>
                        <li>批處理：可配置批處理大小和窗口</li>
                        <li>用例：數據複製、緩存更新、通知</li>
                    </ul>
                </li>
                <li>EventBridge：處理計劃事件
                    <ul>
                        <li>調度類型：固定速率或cron表達式</li>
                        <li>事件模式：基於模式匹配的事件路由</li>
                        <li>事件總線：默認、自定義和合作夥伴事件總線</li>
                        <li>用例：定期任務、系統集成、工作流觸發</li>
                    </ul>
                </li>
                <li>SQS/SNS：處理消息和通知
                    <ul>
                        <li>SQS集成：輪詢隊列消息</li>
                        <li>SNS集成：訂閱通知</li>
                        <li>批處理：可配置批處理大小</li>
                        <li>用例：異步處理、工作隊列、事件驅動架構</li>
                        <li>實例例子：一家物流公司使用Lambda與SQS和SNS集成，創建了一個事件驅動的訂單處理系統，當新訂單進入SQS隊列時，Lambda函數處理訂單並更新庫存數據庫，然後通過SNS發送通知給客戶和配送團隊</li>
                    </ul>
                </li>
            </ul>
        </li>
    </ul>
    
    <div class="important">
        <p>最佳實踐：將 Lambda 函數設計為小型、專注的單一功能，遵循單一職責原則。使用環境變量存儲配置，使用層共享代碼，使用 X-Ray 進行調試和性能分析。</p>
    </div>
    
    <h3>AWS Step Functions</h3>
    <ul>
        <li>無服務器工作流服務
            <ul>
                <li>協調多個 AWS 服務
                    <ul>
                        <li>集成服務：Lambda、ECS、Fargate、DynamoDB、SQS、SNS等</li>
                        <li>API集成：支持200多個AWS API操作</li>
                        <li>SDK集成：支持AWS SDK集成模式</li>
                        <li>自定義集成：支持通過HTTP任務集成第三方服務</li>
                    </ul>
                </li>
                <li>使用視覺化工作流（狀態機）
                    <ul>
                        <li>設計工具：提供可視化工作流設計器</li>
                        <li>定義語言：使用Amazon States Language(ASL)定義工作流</li>
                        <li>可視化執行：提供執行歷史和可視化監控</li>
                        <li>版本控制：支持工作流版本控制</li>
                    </ul>
                </li>
                <li>支持順序、並行、條件和錯誤處理
                    <ul>
                        <li>流程控制：支持順序執行、條件分支、並行執行</li>
                        <li>錯誤處理：支持重試、回退、錯誤捕獲</li>
                        <li>狀態轉換：基於輸入/輸出和條件的狀態轉換</li>
                        <li>數據處理：支持數據過濾、轉換和操作</li>
                    </ul>
                </li>
            </ul>
        </li>
        <li>工作流類型
            <ul>
                <li>標準工作流：最長運行時間 1 年，精確一次執行
                    <ul>
                        <li>執行保證：精確一次執行，不會重複處理步驟</li>
                        <li>持久性：完整的執行歷史記錄</li>
                        <li>延遲特性：狀態轉換可能需要幾秒鐘</li>
                        <li>適用場景：長時間運行的工作流、需要審計的流程、需要精確一次執行的業務流程</li>
                    </ul>
                </li>
                <li>快速工作流：最長運行時間 5 分鐘，至少一次執行
                    <ul>
                        <li>執行保證：至少一次執行，可能重複處理步驟</li>
                        <li>性能特點：高吞吐量，低延遲(100毫秒以下)</li>
                        <li>成本優勢：比標準工作流成本低</li>
                        <li>適用場景：高容量事件處理、IoT數據攝取、流媒體數據處理</li>
                    </ul>
                </li>
            </ul>
        </li>
        <li>狀態類型
            <ul>
                <li>任務：執行工作（Lambda、ECS 任務等）
                    <ul>
                        <li>功能：調用AWS服務或第三方服務執行操作</li>
                        <li>集成類型：AWS服務集成、活動任務、HTTP任務</li>
                        <li>服務集成模式：請求響應、運行作業(.sync)、等待回調(.waitForTaskToken)</li>
                        <li>超時處理：可配置超時和心跳超時</li>
                    </ul>
                </li>
                <li>選擇：條件分支
                    <ul>
                        <li>決策邏輯：基於輸入數據的條件評估</li>
                        <li>比較運算符：支持數值、字符串、布爾比較</li>
                        <li>複合條件：支持AND、OR、NOT邏輯運算符</li>
                        <li>默認轉換：當沒有條件匹配時的默認路徑</li>
                    </ul>
                </li>
                <li>並行：並行執行分支
                    <ul>
                        <li>並發執行：同時執行多個分支</li>
                        <li>數據處理：可以將輸入分配給各分支</li>
                        <li>錯誤處理：可配置分支失敗時的行為</li>
                        <li>結果合併：合併所有分支的輸出</li>
                    </ul>
                </li>
                <li>映射：迭代數組
                    <ul>
                        <li>迭代處理：對數組中的每個項目執行相同的工作流</li>
                        <li>執行模式：內聯模式(同步)和分佈式模式(並行)</li>
                        <li>批處理：支持批量處理項目</li>
                        <li>容錯性：可配置項目失敗時的行為</li>
                    </ul>
                </li>
                <li>等待：暫停執行
                    <ul>
                        <li>延遲類型：固定延遲或直到特定時間點</li>
                        <li>時間表達式：支持ISO-8601格式的時間戳和時間間隔</li>
                        <li>動態延遲：支持基於輸入的動態延遲時間</li>
                        <li>使用場景：實現定時任務、冷卻期、延遲處理</li>
                    </ul>
                </li>
                <li>成功/失敗：結束執行
                    <ul>
                        <li>成功狀態：表示工作流成功完成</li>
                        <li>失敗狀態：表示工作流失敗，可指定錯誤和原因</li>
                        <li>結果處理：可以返回最終結果或錯誤信息</li>
                        <li>終止行為：立即終止工作流執行</li>
                    </ul>
                </li>
            </ul>
        </li>
        <li>用例
            <ul>
                <li>數據處理工作流
                    <ul>
                        <li>ETL流程：提取、轉換和加載數據</li>
                        <li>數據驗證：多步驟數據驗證和清理</li>
                        <li>批處理：大規模數據批處理</li>
                        <li>實例例子：一家金融分析公司使用Step Functions協調每日數據處理流程，從多個來源提取數據，使用Lambda函數進行轉換和驗證，然後將結果加載到數據倉庫，最後生成報告並通過SNS發送通知</li>
                    </ul>
                </li>
                <li>IT 自動化
                    <ul>
                        <li>資源配置：自動化AWS資源的創建和配置</li>
                        <li>系統維護：定期維護任務和修補</li>
                        <li>事件響應：自動化事件響應和故障恢復</li>
                        <li>實例例子：一家SaaS提供商使用Step Functions自動化其基礎設施管理，包括每週備份、安全掃描、資源優化和合規性檢查，減少了運維團隊的手動工作</li>
                    </ul>
                </li>
                <li>微服務協調
                    <ul>
                        <li>服務編排：協調多個微服務的交互</li>
                        <li>分佈式事務：實現跨服務的事務一致性</li>
                        <li>API組合：將多個API調用組合為單一操作</li>
                        <li>實例例子：一家電子商務平台使用Step Functions協調訂單處理流程，包括庫存檢查、支付處理、訂單履行和發貨通知，確保即使某個服務暫時不可用，整個流程也能可靠完成</li>
                    </ul>
                </li>
                <li>機器學習管道
                    <ul>
                        <li>模型訓練：協調數據準備、模型訓練和評估</li>
                        <li>批量推理：大規模批量預測處理</li>
                        <li>人工審核：在關鍵步驟加入人工審核</li>
                        <li>實例例子：一家醫療科技公司使用Step Functions構建機器學習管道，處理醫學圖像，訓練診斷模型，進行批量推理，並在需要時將結果發送給專家進行審核，整個流程既自動化又保持了人工監督</li>
                    </ul>
                </li>
            </ul>
        </li>
    </ul>
    
    <div class="note">
        <p>考試要點：了解 Lambda 和 Step Functions 的集成方式，以及如何使用 Step Functions 構建複雜的無服務器工作流。</p>
    </div>

    <div class="nav">
        <a href="02-安全與身份.html">上一章：安全與身份</a>
        <a href="04-存儲服務.html">下一章：存儲服務</a>
    </div>
